<!-- <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
/> -->
<script
  src="https://kit.fontawesome.com/d2eeb853b4.js"
  crossorigin="anonymous"
></script>
<link
  href="https://fonts.googleapis.com/css?family=Montserrat:100,200,300,400,500,600,700,800,900,bold,bolder"
  rel="stylesheet"
/>

<!-- <div
  [id]="'myCarousel' + '_2'"
  class="carousel slide"
  data-ride="carousel"
  data-interval="5000"
>
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100" src="slide1.jpg" alt="First slide" />
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="slide2.jpg" alt="Second slide" />
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="slide3.jpg" alt="Third slide" />
    </div>
  </div>
  <a
    class="carousel-control-prev"
    [href]="'#myCarousel' + '_2'"
    role="button"
    data-slide="prev"
  >
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a
    class="carousel-control-next"
    [href]="'#myCarousel' + '_2'"
    role="button"
    data-slide="next"
  >
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>

<div
  id="carouselExampleIndicators"
  class="carousel slide"
  data-ride="carousel"
  data-interval="3000"
>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100" src="..." alt="First slide" />
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="..." alt="Second slide" />
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="..." alt="Third slide" />
    </div>
  </div>
  <a
    class="carousel-control-prev"
    href="#carouselExampleIndicators"
    role="button"
    data-slide="prev"
  >
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a
    class="carousel-control-next"
    href="#carouselExampleIndicators"
    role="button"
    data-slide="next"
  >
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div> -->
<div
  [hidden]="is_loading"
  (window:resize)="onResize($event)"
  class="subcontainer"
  style="font-size: 14px; font-family: 'Montserrat'"
  *ngIf="!estatus_identificador"
>
  <!-- <app-custom-icon-picker></app-custom-icon-picker> -->
  <!-- <div class="row m-0" *ngIf="query_params?.origin === 'search'">
    <div class="col-4">
      <button class="btn btn-outline-citric">
        <i class="fa fa-arrow-left"></i> Back
      </button>
    </div>
  </div> -->
  <nav
    style="height: 80px"
    class="navbar navbar-expand-lg row mx-0 justify-content-end"
    [ngStyle]="{
      'background-color': iglesia.header_menu_settings.background_color,
      color: iglesia.header_menu_settings.text_color
    }"
  >
    <div
      *ngIf="iglesia?.header_menu_settings?.show_icon"
      class="col-3 col-lg-5 col-lg-fixed-5 align-self-baseline mr-auto"
    >
      <button
        *ngIf="can_edit"
        class="btn btn-light edit-logo-btn"
        (click)="updateLogo()"
        [disabled]="uploadingLogo"
      >
        <i *ngIf="!uploadingLogo" class="fa fa-edit"></i>
        <i *ngIf="uploadingLogo" class="fa fa-spinner fa-spin"></i>
      </button>
      <div
        [routerLink]="home_route"
        [ngStyle]="{
          'border-width': iglesia?.header_menu_settings?.border_width + 'px',
          'border-color': iglesia?.header_menu_settings?.border_color,
          'background-color':
            iglesia?.header_menu_settings?.second_border_color,
          'min-width':
            width_size - iglesia?.header_menu_settings?.border_width + 'px',
          'max-width':
            width_size - iglesia?.header_menu_settings?.border_width + 'px',
          'min-height':
            width_size - iglesia?.header_menu_settings?.border_width + 'px',
          'max-height':
            width_size - iglesia?.header_menu_settings?.border_width + 'px'
        }"
        class="logo-container logo_container_ad"
      >
        <div
          [hidden]="is_loading"
          class="logo-container-overflow logo_container_ad"
          [ngStyle]="{
            'min-width':
              width_size - iglesia?.header_menu_settings?.border_width + 'px',
            'max-width':
              width_size - iglesia?.header_menu_settings?.border_width + 'px',
            'min-height':
              width_size - iglesia?.header_menu_settings?.border_width + 'px',
            'max-height':
              width_size - iglesia?.header_menu_settings?.border_width + 'px'
          }"
        >
          <img
            class="logo_container_ad"
            [src]="fixUrl(iglesia?.Logo)"
            alt=""
            [ngStyle]="{
              left: -iglesia?.header_menu_settings?.border_width + 'px',
              top: -iglesia?.header_menu_settings?.border_width + 'px'
            }"
          />
        </div>
      </div>
      <div class="col-12 col-md-4" [hidden]="true">
        <div class="custom-file mb-4">
          <input
            #inputLogo
            accept="image/*"
            type="file"
            class="custom-file-input"
            id="customFile"
          />
          <label class="custom-file-label" for="customFile">Choose file</label>
        </div>
      </div>
    </div>
    <!-- <a class="navbar-brand" href="" onclick="return false;">
      <img
        [src]="fixUrl(iglesia?.Logo)"
        alt=""
        class="logo"
        onerror="this.onerror=null; this.src='/assets/img/logoColor.png'"
      />
    </a> -->
    <div
      class="collapse navbar-collapse col col-fixed justify-content-end justify-content-lg-start"
      id="navbar_profile_page"
      [ngClass]="
        iglesia?.header_menu_settings?.show_icon
          ? ''
          : ' offset-3 offset-lg-5 offset-lg-fixed-5'
      "
      [ngStyle]="{
        'background-color': iglesia.header_menu_settings.background_color,
        color: iglesia.header_menu_settings.text_color
      }"
    >
      <div
        cdkDropList
        cdkDropListOrientation="horizontal"
        class="navbar-nav header-nav-menu"
        data-toggle="collapse"
        data-target=".navbar-collapse.show"
        (cdkDropListDropped)="dropLevel($event)"
        [ngClass]="can_edit ? 'example-list' : ''"
      >
        <div
          [cdkDragDisabled]="
            !can_edit ||
            item.idModule == 1 ||
            item.idModule === -1 ||
            item.fixed_id === 'my_account'
          "
          [cdkDragLockAxis]="'x'"
          class="nav-item dropdown"
          *ngFor="let item of iglesia.header_items"
          cdkDrag
          [ngClass]="{
            active:
              actual_page_obj.actualPage == item.idModule &&
              actual_page_obj.id === item.fixed_id,
            'example-box': can_edit,
            'btn-disabled':
              new_tab_existing &&
              !(
                actual_page_obj.actualPage == item.idModule &&
                actual_page_obj.id === item.fixed_id
              ),
            'header-item-menu': true
          }"
          [ngStyle]="{
            'background-color':
              actual_page_obj.actualPage == item.idModule &&
              actual_page_obj.id === item.fixed_id
                ? iglesia?.header_menu_settings?.active_color
                : '',
            color:
              actual_page_obj.actualPage == item.idModule &&
              actual_page_obj.id === item.fixed_id
                ? iglesia?.header_menu_settings?.active_text_color
                : ''
          }"
          [hidden]="!((item.is_visible && shouldShow(item)) || can_edit)"
          style="display: flex; align-items: center"
        >
          <a
            *ngIf="(item.is_visible && shouldShow(item)) || can_edit"
            class="nav-link dropbtn fs-responsive"
            (click)="handleTabClick(item)"
          >
            {{ item.name }}
          </a>
          <div
            *ngIf="
              item.idModule === 2 ||
              item.idModule === 4 ||
              item.idModule === 5 ||
              item.idModule === 6 ||
              item.idModule === 7 ||
              item.idModule === 8 ||
              item.idModule === 9
            "
            class="dropdown-content"
            [ngStyle]="{
              top: height_size + 'px'
            }"
          >
            <a
              *ngFor="let category of getMenuArray(item)"
              (mouseover)="category.is_hover = true"
              (mouseleave)="category.is_hover = false"
              [ngStyle]="{
                color: category.font_color || '#000000',
                'font-style': category.font_style || 'unset',
                'font-size': category.font_size || '14px',
                'font-weight': category.font_weight || 'normal',
                'text-align': category.text_align || 'center',
                'background-color':
                  actual_slug == getId(item, category)
                    ? category.active_background_color || '#e4e4e4'
                    : category.is_hover
                    ? category.hover_background_color || '#dddddd'
                    : category.background_color || '#ffffff'
              }"
              (click)="
                $event.preventDefault();
                handleSubRoute(item, category, getFieldName(item))
              "
              [routerLink]="
                '/organization-profile/main/' +
                iglesiaId +
                '/' +
                item.fixed_id +
                '/' +
                item.slug +
                '/' +
                getId(item, category)
              "
            >
              <span *ngIf="item.idModule === 2">
                {{
                  getCategory(category.idCategoryArticle)?.nombre || "None"
                    | translate
                }}
              </span>
              <span *ngIf="item.idModule === 4">
                {{
                  getElement(category.idDonationForm, donation_forms, "id")
                    ?.name || "None" | translate
                }}
              </span>
              <span *ngIf="item.idModule === 5">
                {{ getGroupElement(category) | translate }}
              </span>
              <span *ngIf="item.idModule === 6">
                {{
                  getGalleryElement(category) | translate
                }}
              </span>
              <span *ngIf="item.idModule === 7">
                {{
                  getElement(category.idMailingList, iglesia.inboxes, "id")
                    ?.name || "None" | translate
                }}
              </span>
              <span *ngIf="item.idModule === 8">
                {{
                  getElement(
                    category.idCommunityBox,
                    iglesia.community_boxes,
                    "id"
                  )?.name || "None" | translate
                }}
              </span>
              <span *ngIf="item.idModule === 9">
                {{
                  getElement(
                    category.idPlaylist,
                    iglesia.playlists,
                    "idPlaylist"
                  )?.name || "None" | translate
                }}
              </span>
            </a>
            <!-- <a href="#">Link 2</a>
            <a href="#">Link 3</a> -->
          </div>

          <!-- <div
            *ngIf="item.idModule === 6"
            class="dropdown-content"
            [ngStyle]="{
              top: currentUser ? '80px' : '56px'
            }"
          >
            <a
              (mouseover)="category.is_hover = true"
              (mouseleave)="category.is_hover = false"
              [ngStyle]="{
                color: category.font_color || '#000000',
                'font-style': category.font_style || 'unset',
                'font-size': category.font_size || '14px',
                'font-weight': category.font_weight || 'normal',
                'text-align': category.text_align || 'center',
                'background-color':
                  actual_slug == category.idGallery
                    ? category.active_background_color || '#e4e4e4'
                    : category.is_hover
                    ? category.hover_background_color || '#dddddd'
                    : category.background_color || '#ffffff'
              }"
              (click)="$event.preventDefault(); handleSubRoute(item, category, 'idGallery')"
              [routerLink]="
                '/organization-profile/main/' +
                iglesiaId +
                '/' +
                item.fixed_id +
                '/' +
                item.slug +
                '/' +
                category.id
              "
              *ngFor="let category of galleries_to_display_form.value"
            >
              {{
                getElement(category.idGallery, iglesia.galleries, 'id')?.name || "None"
                  | translate
              }}
            </a>
          </div> -->
        </div>
        <div
          [cdkDragDisabled]="true"
          class="nav-item btn-success"
          cdkDrag
          [ngClass]="{
            'example-box': can_edit,
            'btn-disabled': new_tab_existing
          }"
          *ngIf="can_edit && !iglesia?.free_version"
          (click)="addSubpageTab()"
        >
          <a class="p-2">
            <i class="fa fa-plus"></i>
          </a>
        </div>
      </div>
      <!-- <div cdkDropList class="drag-list builder-scroll" (cdkDropListDropped)="dropLevel($event)">
      <ng-container *ngFor="let level of questions">
        <div class="drag-box" cdkDrag>
          {{ level.order }}. {{ level.name }}
        </div>
      </ng-container>
    </div> -->

      <!-- <div
        class="navbar-nav mr-auto example-list"
        data-toggle="collapse"
        data-target=".navbar-collapse.show"
        (cdkDropListDropped)="dropLevel($event)"
        cdkDropListOrientation="horizontal"
      >
        <div
          *ngFor="let item of iglesia.header_items"
          class="nav-item example-box"
          [ngClass]="actualPage == item.idModule ? 'active' : ''"
          cdkDrag
          [cdkDragDisabled]="!can_edit"
          [cdkDragLockAxis]="'x'"
        >
          <a
            *ngIf="(item.is_visible && shouldShow(item)) || can_edit"
            class="nav-link"
            [routerLink]="
              '/organization-profile/' +
              this.route.snapshot.url[0].path +
              '/' +
              this.route.snapshot.params.id +
              '/' +
              item.slug
            "
            (click)="(null)"
          >
            {{ item.name }}
          </a>
        </div>
      </div> -->
      <div class="form-inline my-2 my-lg-0 w-25" *ngIf="can_edit">
        <!-- <select
          required
          class="form-control form-control-sm w-70"
          [(ngModel)]="iglesia.palette"
          (ngModelChange)="wasEdited()"
        >
          <option [value]="0" class="bg-dark text-white">Dark Gray</option>
          <option [value]="1" class="bg-primary text-light">Blue</option>
          <option [value]="2" class="bg-secondary text-white">Gray</option>
          <option [value]="3" class="bg-success text-white">Green</option>
          <option [value]="4" class="bg-info text-white">Light BLue</option>
          <option [value]="5" class="bg-warning text-dark">Yellow</option>
          <option [value]="6" class="bg-danger text-white">Red</option>
          <option [value]="7" class="bg-light text-dark">Light Gray</option>
          <option [value]="8" class="bg-white text-dark">White</option>
        </select> -->
        <button
          type="button"
          *ngIf="editMode"
          class="btn btn-success btn-sm"
          (click)="saveIglesia()"
        >
          <i class="fa fa-save"></i>
        </button>
      </div>
    </div>
    <div class="col-2 col-sm-1 align-self-baseline d-lg-none">
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbar_profile_page"
        aria-controls="navbar_profile_page"
        aria-expanded="false"
        aria-label="Toggle navigation"
        [ngStyle]="{
          'border-color': iglesia.header_menu_settings.text_color,
          color: iglesia.header_menu_settings.text_color
        }"
      >
        <!-- <span class="navbar-toggler-icon"></span> -->
        <i class="fa fa-bars"></i>
      </button>
    </div>
  </nav>

  <!-- <div
    *ngIf="iglesia.header_menu_settings.is_full_width && actualPage != 1"
    [hidden]="is_loading"
    class="banner-container"
    [ngStyle]="{
      'background-image': getCover(),
      display: actualPage == 1 ? '' : ''
    }"
  ></div> -->

  <div
    *ngIf="
      iglesia.header_menu_settings.is_full_width &&
      actual_tab_control?.value.idModule !== 'account' &&
      slides_array_banner.length > 0 &&
      slides_array_banner.at(0).get('picture').value
    "
    #rectangle_sizable
    class="rectangle"
    mwlResizable
    [enableGhostResize]="true"
    (resizeEnd)="onResizeEnd($event)"
    [ngStyle]="{ height: iglesia.header_menu_settings.height + 'px' }"
  >
    <app-home-banner-slide
      *ngIf="actual_tab_control?.value.fixed_id"
      [slides]="slides_array_banner"
      [iglesia]="iglesia"
      [id]="'carouselBanner_' + actual_tab_control?.value.fixed_id"
    ></app-home-banner-slide>

    <div
      *ngIf="can_edit"
      class="resize-handle-bottom"
      mwlResizeHandle
      [resizeEdges]="{ bottom: true }"
    ></div>
  </div>

  <div
    [ngClass]="{
      container: !is_complete_full_width,
      'container-fw': iglesia.header_menu_settings.is_full_width
    }"
    class="page pt-0"
  >
    <!-- BANNER AREA -->
    <div
      *ngIf="
        !iglesia.header_menu_settings.is_full_width &&
        actual_tab_control?.value.idModule !== 'account' &&
        slides_array_banner.length > 0 &&
        slides_array_banner.at(0).get('picture').value
      "
      #rectangle_sizable
      class="rectangle"
      mwlResizable
      [enableGhostResize]="true"
      (resizeEnd)="onResizeEnd($event)"
      [ngStyle]="{ height: iglesia.header_menu_settings.height + 'px' }"
    >
      <app-home-banner-slide
        *ngIf="actual_tab_control?.value.fixed_id"
        [slides]="slides_array_banner"
        [iglesia]="iglesia"
        [id]="'carouselBanner_' + actual_tab_control?.value.fixed_id + '_2'"
      ></app-home-banner-slide>

      <div
        *ngIf="can_edit"
        class="resize-handle-bottom"
        mwlResizeHandle
        [resizeEdges]="{ bottom: true }"
      ></div>
    </div>

    <div class="main-dashboard" *ngIf="!idArticle && !mailing_list">
      <div
        *ngIf="currentUser?.isSuperUser && iglesia.free_version"
        class="row mt-3"
      >
        <h5 class="col-12 text-danger text-center">
          You may be seeing less information because this organization is
          limited.
        </h5>
      </div>
      <div class="row mt-3 mx-0" *ngIf="canToggle()">
        <div *ngIf="query_params?.origin === 'search'" class="col-4 px-0">
          <button
            (click)="backToSearch()"
            class="btn btn-sm btn-outline-citric"
          >
            <i class="fa fa-arrow-left"></i> Back
          </button>
        </div>
        <div
          [ngClass]="query_params?.origin === 'search' ? 'col-8' : 'col-12'"
          class="text-right px-0"
        >
          <button class="btn btn-sm btn-success" (click)="togglePreview()">
            {{ show_as_preview ? "Preview" : "Edit" }}
          </button>
        </div>
      </div>
      <div
        class="roundedDiv mb-3 shadow mt-3"
        *ngIf="
          can_edit &&
          header_items_form?.length > 0 &&
          actual_tab_control.value.idModule !== 'account'
        "
        [formGroup]="grid_template_form"
      >
        <div class="row m-0">
          <div class="col-12">
            <h4>Tab info</h4>
          </div>
          <div class="col-12">
            <div class="row" formArrayName="header_items">
              <div
                [formGroup]="actual_tab_control"
                class="col-12 row m-0 group-item"
              >
                <div class="col-12 text-right">
                  <h5
                    class="text-left"
                    *ngIf="
                      actual_tab_control.value.idModule === 4 &&
                      !check_stripe_settings
                    "
                  >
                    <span class="text-danger">
                      According to the last check, this organization has some
                      issues with it Stripe settings.</span
                    >
                  </h5>
                  <span *ngIf="actual_tab_control.value.is_new_tab">
                    <b>
                      You can't change to another tab when you're editing a new
                      tab. To edit another one, please
                      <span class="text-success"> save your changes</span> or
                      <span class="text-danger"> delete </span> this tab.
                    </b>
                  </span>
                  <button
                    class="btn btn-sm btn-danger"
                    (click)="deleteTab(actual_tab_control, actual_index)"
                  >
                    <i class="fa fa-trash"></i>
                  </button>
                </div>
                <div class="col-6">
                  <div class="form-group">
                    <label>Name* </label>
                    <input
                      type="text"
                      required
                      class="form-control mb-1"
                      placeholder="Enter your tab's name."
                      formControlName="name"
                      [class.is-invalid]="
                        actual_tab_control.get('name').dirty &&
                        actual_tab_control.get('name').invalid
                      "
                      (ngModelChange)="
                        wasEdited(); edit_object.header_tab = true
                      "
                    />
                  </div>
                </div>
                <div
                  class="col-6"
                  [hidden]="actual_tab_control.value.open_as_external"
                >
                  <div class="form-group">
                    <label>Module* </label>
                    <select
                      type="text"
                      required
                      class="form-control mb-1"
                      placeholder="Enter your tab's name."
                      formControlName="idModule"
                      [class.is-invalid]="
                        actual_tab_control.get('idModule').dirty &&
                        actual_tab_control.get('idModule').invalid
                      "
                      (ngModelChange)="wasEdited()"
                      (change)="
                        fixASNumber('idModule'); edit_object.header_tab = true
                      "
                    >
                      <option [value]="-1">-- Select an option --</option>
                      <option
                        *ngFor="let head_item of header_modules"
                        [value]="head_item.id"
                      >
                        {{ head_item.name }}
                      </option>
                    </select>
                  </div>
                </div>
                <div
                  [hidden]="actual_tab_control.value.idModule !== 10"
                  class="col-6"
                >
                  <div class="form-group">
                    <label>Category* </label>
                    <select
                      type="text"
                      [required]="actual_tab_control.value.idModule === 10"
                      class="form-control mb-1"
                      placeholder="Enter your tab's name."
                      formControlName="item_id"
                      [class.is-invalid]="
                        actual_tab_control.get('item_id').dirty &&
                        actual_tab_control.get('item_id').invalid
                      "
                      (ngModelChange)="
                        wasEdited(); edit_object.header_tab = true
                      "
                    >
                      <option
                        *ngFor="let head_item of categories"
                        [value]="head_item.idCategoriaArticulo"
                      >
                        {{ head_item.nombre }}
                      </option>
                    </select>
                  </div>
                </div>
                <div
                  [hidden]="actual_tab_control.value.idModule != 11"
                  class="col-6"
                >
                  <div class="form-group">
                    <label>Submodule* </label>
                    <select
                      type="text"
                      [required]="actual_tab_control.value.idModule == 11"
                      class="form-control mb-1"
                      placeholder="Enter your tab's name."
                      formControlName="idSubmodule"
                      [class.is-invalid]="
                        actual_tab_control.get('idSubmodule').dirty &&
                        actual_tab_control.get('idSubmodule').invalid
                      "
                      (ngModelChange)="wasEdited()"
                      (change)="
                        resetItemID($event); edit_object.header_tab = true
                      "
                    >
                      <option
                        *ngFor="let head_item of header_submodules"
                        [value]="head_item.id"
                      >
                        {{ head_item.name }}
                      </option>
                    </select>
                  </div>
                </div>
                <div
                  [hidden]="actual_tab_control.value.idModule != 11"
                  class="col-6"
                >
                  <div class="form-group">
                    <label>Item to show* </label>
                    <select
                      type="text"
                      [required]="actual_tab_control.value.idModule == 11"
                      class="form-control mb-1"
                      placeholder="Enter your tab's name."
                      formControlName="item_id"
                      [class.is-invalid]="
                        actual_tab_control.get('item_id').dirty &&
                        actual_tab_control.get('item_id').invalid
                      "
                      (ngModelChange)="
                        wasEdited(); edit_object.header_tab = true
                      "
                    >
                      <option
                        *ngFor="let head_item of items"
                        [value]="head_item[detail_item_properties.id_key]"
                      >
                        {{ head_item[detail_item_properties.name_key] }}
                      </option>
                    </select>
                  </div>
                </div>
                <div
                  [hidden]="!actual_tab_control.value.open_as_external"
                  class="col-6"
                >
                  <div class="form-group">
                    <label>Url* </label>
                    <input
                      type="text"
                      [required]="actual_tab_control.value.open_as_external"
                      class="form-control mb-1"
                      placeholder="Enter an url."
                      formControlName="external_url"
                      [class.is-invalid]="
                        actual_tab_control.get('external_url').dirty &&
                        actual_tab_control.get('external_url').invalid
                      "
                      (ngModelChange)="
                        wasEdited(); edit_object.header_tab = true
                      "
                    />
                  </div>
                </div>
                <div class="w-100"></div>
                <div class="col-12" formArrayName="slides">
                  <div
                    class="row"
                    *ngFor="
                      let slide_group of slides_array.controls;
                      let j = index;
                      let last_ = last
                    "
                    [formGroupName]="j"
                  >
                    <div class="col-12 col-md-8">
                      <input
                        hidden
                        #input_banner
                        type="file"
                        name="photo"
                        class="form-control"
                        accept="image/*"
                        (change)="
                          addSlidePhoto(
                            slides_array.at(j),
                            $event.target.files[0]
                          )
                        "
                      />
                      <div class="form-group">
                        <label *ngIf="j == 0"> Picture </label>
                        <input
                          class="form-control"
                          type="text"
                          readonly
                          formControlName="picture"
                        />
                      </div>
                    </div>
                    <div class="col-12 col-md-4 align-self-end">
                      <div class="btn-group mb-3">
                        <button
                          (click)="input_banner.click()"
                          class="btn btn-sm btn-info mr-2"
                        >
                          <i class="fa fa-pencil"> </i>
                        </button>
                        <button
                          *ngIf="
                            slides_array.at(j).get('picture').value || last_
                          "
                          (click)="removeSlide(j, slides_array.at(j))"
                          class="btn btn-sm btn-danger mr-2"
                        >
                          <i class="fa fa-trash"> </i>
                        </button>

                        <!-- *ngIf="
                              last_ &&
                              categories_left(
                                settings_categories_form
                                  .at(i)
                                  .get('idCategoryArticle').value,
                                settings_categories_form
                              ).length > 1 &&
                              settings_categories_form
                                .at(i)
                                .get('idCategoryArticle').value
                            " -->

                        <button
                          *ngIf="
                            last_ &&
                            actualPage == 1 &&
                            (slides_array.at(j).get('temp_src').value ||
                              slides_array.at(j).get('picture').value)
                          "
                          (click)="addSlide()"
                          class="btn btn-sm btn-success mr-2"
                        >
                          <i class="fa fa-plus"> </i>
                        </button>

                        <button
                          *ngIf="slides_array.at(j).get('temp_src').value"
                          class="btn btn-sm btn-success"
                          (click)="
                            saveProfileCover(
                              actual_tab_control,
                              slides_array.at(j)
                            )
                          "
                        >
                          Save
                        </button>
                        <button
                          *ngIf="slides_array.at(j).get('temp_src').value"
                          class="btn btn-warning btn-sm"
                          (click)="cancelProfileCover(slides_array.at(j))"
                        >
                          Cancel
                        </button>
                      </div>
                    </div>
                    <!-- <div class="col-12" #col_img_banner_container>
                      <div
                        class="img-banner-container"
                        [ngStyle]="{
                          width: container.width,
                          height: container.height
                        }"
                        #img_banner_container
                      >
                        <img
                          class="img-banner-cover"
                          #img_tag
                          [src]="getBannerCover()"
                          alt=""
                        />
                      </div>
                    </div> -->
                  </div>
                </div>
                <div class="w-100"></div>
                <div
                  class="col-4 col-md-2"
                  [hidden]="!actual_tab_control.value.can_be_hide"
                >
                  <div class="form-group form-check mb-0">
                    <input
                      formControlName="is_visible"
                      (change)="setSize(); edit_object.header_tab = true"
                      type="checkbox"
                      class="form-check-input"
                      id="is_visible"
                    />
                    <label class="form-check-label" for="is_visible">
                      Show
                    </label>
                  </div>
                </div>
                <div
                  [hidden]="actual_tab_control.value.idModule === 11"
                  class="col-4 col-md-2"
                >
                  <div class="form-group form-check mb-0">
                    <input
                      formControlName="open_as_external"
                      (change)="setSize(); edit_object.header_tab = true"
                      type="checkbox"
                      class="form-check-input"
                      id="open_as_external"
                    />
                    <label class="form-check-label" for="open_as_external">
                      External?
                    </label>
                  </div>
                </div>
                <div class="col-2 btn-group" [hidden]="!edit_object.header_tab">
                  <button
                    type="button"
                    *ngIf="
                      can_edit &&
                      editMode &&
                      (actual_tab_control.value.idModule > 0 ||
                        actual_tab_control.value.open_as_external)
                    "
                    class="btn btn-success btn-sm"
                    (click)="toggleEditMode(); edit_object.header_tab = false"
                    [ngClass]="{ 'btn-warning': editMode }"
                  >
                    {{ editMode ? "Cancel" : "Edit" }}
                  </button>
                  <button
                    type="button"
                    *ngIf="
                      can_edit &&
                      editMode &&
                      (actual_tab_control.value.idModule > 0 ||
                        actual_tab_control.value.open_as_external)
                    "
                    class="btn btn-success btn-sm"
                    (click)="saveIglesia()"
                    [disabled]="!checkFields() || actual_tab_control.invalid"
                  >
                    <i class="fa fa-save"></i>
                    {{ "Save" }}
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Start of donations -->
      <div
        class="row mt-3 text-center justify-content-end mx-0"
        *ngIf="!loadingIglesia"
        [ngStyle]="{ display: actualPage == 4 ? '' : 'none' }"
      >
        <div
          class="col-12"
          [formGroup]="actual_tab_control.get('settings')"
          *ngIf="
            can_edit && actualPage == 4 && actual_tab_control.get('settings')
          "
        >
          <div
            class="row mx-0"
            *ngIf="can_edit"
            formArrayName="categories"
            cdkDropList
            cdkDropListOrientation="vertical"
            [ngClass]="can_edit ? 'category-drag-list' : ''"
            (cdkDropListDropped)="
              sortCategoriesArray(settings_categories_form.controls, $event)
            "
          >
            <div
              [formGroupName]="i"
              class="col-12 row m-0"
              *ngFor="
                let item of settings_categories_form.controls;
                let i = index;
                let last_ = last;
                let f = first
              "
              cdkDrag
              [cdkDragDisabled]="!can_edit"
              [cdkDragLockAxis]="'y'"
              [ngClass]="{
                'category-drag-box': can_edit
              }"
            >
              <label
                class="col-12 hide-control"
                *ngIf="i === 0"
                for="idOrganization"
              >
                <h5>Donations forms to show</h5>
              </label>
              <div class="col-5 align-self-center">
                <div
                  class="form-group"
                  style="display: flex; flex-direction: column"
                >
                  <select
                    required
                    class="hide-control form-control"
                    formControlName="idDonationForm"
                    (ngModelChange)="changeContactUrl()"
                  >
                    <option
                      *ngFor="
                        let category of items_in_array_left(
                          settings_categories_form.at(i).get('idDonationForm')
                            .value,
                          donation_forms,
                          'id',
                          'idDonationForm'
                        )
                      "
                      [value]="category.id"
                    >
                      {{ category.name | translate }}
                    </option>
                  </select>
                  <span class="name-span" style="display: none">
                    {{
                      getElement(
                        settings_categories_form.at(i).get("idDonationForm")
                          .value,
                        donation_forms,
                        "id"
                      )?.name | translate
                    }}
                  </span>
                </div>
              </div>
              <div class="col-3 align-self-center">
                <div
                  hidden
                  class="form-group"
                  style="display: flex; flex-direction: column"
                >
                  <select
                    required
                    class="hide-control form-control"
                    formControlName="contact_language"
                    (ngModelChange)="changeContactUrl()"
                  >
                    <option value="es">Español</option>
                    <option value="en">English</option>
                  </select>
                </div>
              </div>
              <div class="col-4 text-right align-self-center">
                <div
                  class="btn-group mr-2"
                  *ngIf="
                    last_ &&
                    items_in_array_left(
                      settings_categories_form.at(i).get('idDonationForm')
                        .value,
                      donation_forms,
                      'id',
                      'idDonationForm'
                    ).length > 1 &&
                    settings_categories_form.at(i).get('idDonationForm').value
                  "
                >
                  <button
                    (click)="
                      addNewItem(
                        'id',
                        'idDonationForm',
                        settings_categories_form
                      )
                    "
                    class="btn btn-sm btn-success"
                  >
                    <i class="fa fa-plus"> </i>
                  </button>
                </div>
                <div class="btn-group">
                  <button
                    (click)="
                      removeItem(
                        i,
                        settings_categories_form,
                        'id',
                        'idDonationForm'
                      )
                    "
                    class="btn btn-sm btn-danger mr-2"
                  >
                    <i class="fa fa-trash"> </i>
                  </button>

                  <button
                    (click)="openStylePopup(item, 'contact')"
                    class="btn btn-sm btn-info mr-2"
                  >
                    <i class="fa fa-pencil"> </i>
                  </button>
                </div>
                <div
                  class="btn-group"
                  *ngIf="settings_categories_form.length > 0"
                >
                  <div *ngIf="can_edit" class="example-handle" cdkDragHandle>
                    <svg width="24px" fill="currentColor" viewBox="0 0 24 24">
                      <path
                        d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"
                      ></path>
                      <path d="M0 0h24v24H0z" fill="none"></path>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-4 mb-3" *ngIf="can_edit">
          <div class="btn-group" *ngIf="editMode">
            <button
              type="button"
              *ngIf="editMode"
              class="btn btn-warning btn-sm"
              (click)="toggleEditMode()"
            >
              Cancel
            </button>
            <button
              class="btn btn-sm btn-success"
              (click)="saveIglesia()"
              [disabled]="!checkFields()"
            >
              Save
            </button>
          </div>
        </div>

        <div
          *ngIf="actualPage === 4"
          class="roundedDiv col-12 text-center shadow p-0"
          style="overflow: hidden"
        >
          <app-profile-items-display
            #donations_display
            style="display: block"
            *ngIf="donations_to_display.length > 0"
            class="col-12 p-0"
            [idOrganization]="iglesiaId || currentUser?.idIglesia"
            [view_mode]="can_edit ? 'edition' : 'detail'"
            [items]="donations_to_display"
            [items_in_tab]="settings_form.value.categories"
            [style_settings]="grid_template_form.value"
          >
          </app-profile-items-display>

          <app-donations-v2
            *ngIf="donations_to_display.length == 0"
            [hide_headers]="true"
            [idOrganization]="iglesiaId || currentUser?.idIglesia"
          ></app-donations-v2>
        </div>

        <div
          *ngIf="
            !donations_to_display && donation_forms?.length == 0 && can_edit
          "
          class="roundedDiv col-12 text-center shadow"
        >
          <h2>
            No tienes ningún formulario de donaciones creado. Ingresa al botón
            de abajo para crear uno!
          </h2>
          <button
            type="button"
            routerLink="/donations/forms"
            class="btn btn-success btn-sm"
          >
            <i class="fa fa-save"></i>
            Formularios
          </button>
        </div>
      </div>

      <div
        class="row mt-3 justify-content-end"
        *ngIf="!loadingIglesia"
        [ngStyle]="{ display: actualPage == 5 ? '' : 'none' }"
      >
        <div
          class="col-12"
          [formGroup]="actual_tab_control.get('settings')"
          *ngIf="
            can_edit && actualPage == 5 && actual_tab_control.get('settings')
          "
        >
          <div
            class="row mx-0"
            *ngIf="can_edit"
            formArrayName="categories"
            cdkDropList
            cdkDropListOrientation="vertical"
            [ngClass]="can_edit ? 'category-drag-list' : ''"
            (cdkDropListDropped)="
              sortCategoriesArray(settings_categories_form.controls, $event)
            "
          >
            <div
              [formGroupName]="i"
              class="col-12 row m-0 justify-content-end"
              *ngFor="
                let item of settings_categories_form.controls;
                let i = index;
                let last_ = last;
                let f = first
              "
              cdkDrag
              [cdkDragDisabled]="!can_edit"
              [cdkDragLockAxis]="'y'"
              [ngClass]="{
                'category-drag-box': can_edit
              }"
            >
              <div class="col-12 col-md-3 align-self-start">
                <div
                  class="form-group"
                  style="display: flex; flex-direction: column"
                >
                  <label *ngIf="i == 0"> View mode </label>
                  <select
                    formControlName="idGroupViewMode"
                    class="form-control"
                    (change)="
                      checkActualViewSetting(settings_categories_form.at(i))
                    "
                  >
                    <option value="1">Group type</option>
                    <option value="2">Category</option>
                    <option value="3">Both</option>
                  </select>
                </div>
              </div>
              <div class="col-12 col-md-3 align-self-center">
                <div
                  class="form-group"
                  style="display: flex; flex-direction: column"
                  *ngIf="
                    settings_categories_form.at(i).get('idGroupViewMode')
                      .value == 1 ||
                    settings_categories_form.at(i).get('idGroupViewMode')
                      .value == 3
                  "
                >
                  <label
                    class="hide-control col-12"
                    *ngIf="i === 0"
                    for="idOrganization"
                  >
                    Group types to show
                  </label>
                  <select
                    required
                    class="hide-control form-control"
                    formControlName="idGroupType"
                    (ngModelChange)="
                      checkNewGroupTypeValue(
                        settings_categories_form.at(i),
                        $event
                      )
                    "
                  >
                    <option
                      *ngFor="
                        let category of group_types_left_advanced(
                          settings_categories_form.at(i)
                        )
                      "
                      [value]="category.idGroupType"
                    >
                      {{ category.name | translate }}
                    </option>
                  </select>
                  <span class="name-span" style="display: none">
                    {{
                      getElement(
                        settings_categories_form.at(i).get("idGroupType").value,
                        group_types,
                        "idGroupType"
                      )?.name | translate
                    }}
                  </span>
                </div>
                <div
                  class="form-group"
                  style="display: flex; flex-direction: column"
                  *ngIf="
                    settings_categories_form.at(i).get('idGroupViewMode')
                      .value == 2 ||
                    settings_categories_form.at(i).get('idGroupViewMode')
                      .value == 3
                  "
                >
                  <label
                    class="hide-control col-12"
                    *ngIf="i === 0"
                    for="idOrganization"
                  >
                    Categories to show
                  </label>
                  <select
                    required
                    class="hide-control form-control"
                    formControlName="idGroupCategory"
                    (ngModelChange)="
                      setGroupCategory(settings_categories_form.at(i))
                    "
                  >
                    <option
                      *ngFor="
                        let category of group_categories_left_advanced(
                          settings_categories_form.at(i)
                        )
                      "
                      [value]="category.idGroupCategory"
                    >
                      {{ category.name | translate }}
                    </option>
                  </select>
                  <span class="name-span" style="display: none">
                    {{
                      getElement(
                        settings_categories_form.at(i).get("idGroupType").value,
                        group_types,
                        "idGroupType"
                      )?.name | translate
                    }}
                  </span>
                </div>
              </div>

              <div class="col-6 col-md-3 align-self-start">
                <div class="form-group">
                  <label
                    class="hide-control"
                    *ngIf="i === 0"
                    for="idOrganization"
                  >
                    Items per row
                  </label>
                  <select
                    required
                    class="form-control w-100"
                    formControlName="items_per_row"
                    (ngModelChange)="wasEdited()"
                  >
                    <option value="12">1 per row</option>
                    <option value="6">2 per row</option>
                    <option value="4">3 per row</option>
                    <!-- <option value="3">4 per row</option> -->
                  </select>
                </div>
              </div>
              <div class="col-6 col-md-3 text-right align-self-start mt-4">
                <div
                  class="btn-group mr-2"
                  *ngIf="
                    last_ && canAddNewGroup(settings_categories_form.at(i))
                  "
                >
                  <button
                    (click)="addGroupType()"
                    class="btn btn-sm btn-success"
                  >
                    <i class="fa fa-plus"> </i>
                  </button>
                </div>

                <div class="btn-group">
                  <button
                    (click)="removeGroupType(i)"
                    class="btn btn-sm btn-danger mr-2"
                  >
                    <i class="fa fa-trash"> </i>
                  </button>

                  <button
                    (click)="openStylePopup(item, 'group_type')"
                    class="btn btn-sm btn-info mr-2"
                  >
                    <i class="fa fa-pencil"> </i>
                  </button>
                </div>
                <div
                  class="btn-group"
                  *ngIf="settings_categories_form.length > 0"
                >
                  <div *ngIf="can_edit" class="example-handle" cdkDragHandle>
                    <svg width="24px" fill="currentColor" viewBox="0 0 24 24">
                      <path
                        d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"
                      ></path>
                      <path d="M0 0h24v24H0z" fill="none"></path>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-4 mb-3" *ngIf="can_edit">
          <div class="btn-group" *ngIf="editMode">
            <button
              type="button"
              *ngIf="editMode"
              class="btn btn-warning btn-sm"
              (click)="toggleEditMode()"
            >
              Cancel
            </button>
            <button
              class="btn btn-sm btn-success"
              (click)="saveIglesia()"
              [disabled]="!checkFields()"
            >
              Save
            </button>
          </div>
        </div>
        <div
          *ngIf="settings_categories_form?.length > 0 && actualPage == 5"
          class="col-12 row mx-0 justify-content-center"
        >
          <app-profile-groups-display
            #groups_display
            style="display: block"
            *ngIf="
              settings_categories_form.length > 0 &&
              ((grid_template_form.value.idGroupViewMode == 3 &&
                group_categories.length > 0) ||
                grid_template_form.value.idGroupViewMode < 3)
            "
            class="col-12"
            [idOrganization]="iglesiaId || currentUser?.idIglesia"
            [view_mode]="can_edit ? 'edition' : 'detail'"
            [idGroupViewMode]="grid_template_form.value.idGroupViewMode"
            [categories]="group_categories"
            [items]="settings_categories_form.value"
            [items_tab]="settings_categories_form.value"
            [style_settings]="grid_template_form.value"
          >
          </app-profile-groups-display>
        </div>
      </div>

      <!-- Nosotros | Us -->
      <div
        class="row mt-3 text-center mx-0-small"
        [ngStyle]="{ display: actualPage == 2 ? '' : 'none' }"
      >
        <div class="col-12">
          <ng-template [ngIf]="actualPage == 2">
            <div class="spaceBetween">
              <div class="w-100">
                <div class="row justify-content-end">
                  <form
                    *ngIf="
                      can_edit &&
                      actual_tab_control.get('settings') &&
                      actualPage == 2
                    "
                    style="width: 100%"
                    #basicForm="ngForm"
                    [formGroup]="settings_form.get('grid_info')"
                    class="row mt-4"
                  >
                    <div class="btn-group col-12">
                      <button
                        (click)="settings_obj.menu_option = 'view'"
                        class="btn btn-sm col-6"
                        [ngClass]="{
                          active: settings_obj.menu_option === 'view'
                        }"
                      >
                        View
                      </button>
                      <button
                        (click)="settings_obj.menu_option = 'text'"
                        class="btn btn-sm col-6"
                        [ngClass]="{
                          active: settings_obj.menu_option === 'text'
                        }"
                      >
                        Text
                      </button>
                      <button
                        (click)="settings_obj.menu_option = 'buttons'"
                        class="btn btn-sm col-6"
                        [ngClass]="{
                          active: settings_obj.menu_option === 'buttons'
                        }"
                      >
                        Buttons
                      </button>
                    </div>

                    <h5 class="col-12 text-muted">General Settings</h5>
                    <div class="ws-100"></div>
                    <div
                      class="col-12 mt-2 m-0 row"
                      [hidden]="settings_obj.menu_option !== 'view'"
                    >
                      <div class="col-12 col-sm-6 col-md-3">
                        <h5
                          *ngIf="!can_edit"
                          class="font-weight-bold text-dark"
                        >
                          {{ iglesia.col6 }}
                        </h5>
                        <mat-form-field
                          *ngIf="can_edit"
                          appearance="outline"
                          class="no-padding w-100"
                        >
                          <mat-label [ngClass]="iglesia.col6 ? '' : 'invalid'">
                          </mat-label>
                          <input
                            style="font-size: 20px"
                            class="font-weight-bold text-dark"
                            type="text"
                            [(ngModel)]="iglesia.col6"
                            [ngModelOptions]="{ standalone: true }"
                            matInput
                          />
                        </mat-form-field>
                      </div>
                      <!-- <div
                        *ngIf="can_edit"
                        class="col-12 col-sm-3 align-self-center"
                      >
                        <div
                          class="form-group"
                          style="display: flex; flex-direction: column"
                        >
                          <label for="idOrganization">
                            Categories to display
                          </label>
                          <ng-multiselect-dropdown
                            #multi_select_categories
                            placeholder="Check some categories"
                            [data]="categories"
                            [settings]="category_select_options"
                            (onSelect)="updateCategories($event)"
                            (onDeSelect)="updateCategories($event)"
                            (onSelectAll)="updateCategories($event)"
                            (onDeSelectAll)="updateCategories($event)"
                            [(ngModel)]="selected_categories"
                            [ngModelOptions]="{ standalone: true }"
                          ></ng-multiselect-dropdown>
                        </div>
                      </div>

                      <div
                        *ngIf="can_edit"
                        class="col-12 col-sm-3 align-self-center"
                      >
                        <div
                          class="form-group"
                          style="display: flex; flex-direction: column"
                        >
                          <label for="idOrganization"> Items per row </label>
                          <select
                            required
                            formControlName="col_size"
                            class="form-control w-100"
                          >
                            <option value="12">1 per row</option>
                            <option value="6">2 per row</option>
                            <option value="4">3 per row</option>
                            <option value="3">4 per row</option>
                          </select>
                        </div>
                      </div> -->
                      <div
                        style="margin-left: 28px !important"
                        class="col-6 col-sm-3 col-md-2"
                      >
                        <div
                          class="form-group"
                          style="display: flex; flex-direction: column"
                        >
                          <input
                            type="checkbox"
                            id="display_description"
                            name="display_description_radio"
                            class="custom-control-input"
                            formControlName="display_description"
                            [checked]="
                              settings_form
                                .get('grid_info')
                                .get('display_description').value
                            "
                            (click)="
                              toggleAcceptace(
                                settings_form.get('grid_info'),
                                'display_description'
                              )
                            "
                          />
                          <span
                            class="checkmark"
                            (click)="
                              toggleAcceptace(
                                settings_form.get('grid_info'),
                                'display_description'
                              )
                            "
                          ></span>
                          <label
                            style="cursor: pointer"
                            class="custom-control-label"
                            for="display_description"
                          >
                            Display description?
                          </label>
                        </div>
                      </div>
                      <div style="margin-left: 28px !important" class="col-2">
                        <div
                          class="form-group"
                          style="display: flex; flex-direction: column"
                        >
                          <input
                            type="checkbox"
                            id="display_more_button"
                            name="display_more_button_radio"
                            class="custom-control-input"
                            formControlName="display_more_button"
                            [checked]="
                              settings_form
                                .get('grid_info')
                                .get('display_more_button').value
                            "
                            (click)="
                              toggleAcceptace(
                                settings_form.get('grid_info'),
                                'display_more_button'
                              )
                            "
                          />
                          <span
                            class="checkmark"
                            (click)="
                              toggleAcceptace(
                                settings_form.get('grid_info'),
                                'display_more_button'
                              )
                            "
                          ></span>
                          <label
                            style="cursor: pointer"
                            class="custom-control-label"
                            for="display_more_button"
                          >
                            Display more button?
                          </label>
                        </div>
                      </div>
                      <div style="margin-left: 28px !important" class="col-2">
                        <div
                          class="form-group"
                          style="display: flex; flex-direction: column"
                        >
                          <input
                            type="checkbox"
                            id="display_article_titles"
                            name="display_article_titles_radio"
                            class="custom-control-input"
                            formControlName="display_article_titles"
                            [checked]="
                              settings_form
                                .get('grid_info')
                                .get('display_article_titles').value
                            "
                            (click)="
                              toggleAcceptace(
                                settings_form.get('grid_info'),
                                'display_article_titles'
                              )
                            "
                          />
                          <span
                            class="checkmark"
                            (click)="
                              toggleAcceptace(
                                settings_form.get('grid_info'),
                                'display_article_titles'
                              )
                            "
                          ></span>
                          <label
                            style="cursor: pointer"
                            class="custom-control-label"
                            for="display_article_titles"
                          >
                            Show articles title?
                          </label>
                        </div>
                      </div>
                    </div>

                    <div
                      class="col-12 mt-2 m-0 row"
                      [hidden]="settings_obj.menu_option !== 'text'"
                    >
                      <h5
                        [hidden]="!show_articles_title"
                        class="col-12 text-muted"
                      >
                        Title Settings
                      </h5>
                      <div [hidden]="!show_articles_title" class="ws-100"></div>
                      <div [hidden]="!show_articles_title" class="col-1">
                        <div
                          class="form-group"
                          style="display: flex; flex-direction: column"
                        >
                          <label>Color</label>
                          <input
                            type="color"
                            formControlName="title_text_color"
                            class="form-control"
                            style="width: 50px; height: 40px"
                            (change)="print($event)"
                          />
                          <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                        </div>
                      </div>

                      <div [hidden]="!show_articles_title" class="col-5">
                        <div class="form-group">
                          <label for="title_text_align" color="gray">
                            Align
                          </label>
                          <select
                            class="form-control"
                            id="title_text_align"
                            formControlName="title_text_align"
                          >
                            <option value="left">Left</option>
                            <option value="center">Center</option>
                            <option value="right">Right</option>
                            <option value="justify">Justify</option>
                          </select>
                        </div>
                      </div>

                      <div [hidden]="!show_articles_title" class="col-5">
                        <div class="form-group">
                          <label for="title_text_bold" color="gray">
                            Bold
                          </label>
                          <select
                            class="form-control"
                            id="title_text_bold"
                            formControlName="title_text_bold"
                          >
                            <option value="100">100</option>
                            <option value="200">200</option>
                            <option value="300">300</option>
                            <option value="400">400</option>
                            <option value="500">500</option>
                            <option value="600">600</option>
                            <option value="700">700</option>
                            <option value="800">800</option>
                            <option value="900">900</option>
                            <option value="bold">Bold</option>
                            <option value="bolder">Bolder</option>
                            <option value="lighter">Lighter</option>
                            <option value="normal">Normal</option>
                          </select>
                        </div>
                      </div>

                      <!--  -->

                      <div
                        class="ws-100"
                        [hidden]="!show_display_description"
                      ></div>
                      <h5
                        class="col-12 text-muted"
                        [hidden]="!show_display_description"
                      >
                        Text Settings
                      </h5>
                      <div
                        class="ws-100"
                        [hidden]="!show_display_description"
                      ></div>

                      <div class="col-3" [hidden]="!show_display_description">
                        <div
                          class="form-group"
                          style="display: flex; flex-direction: column"
                        >
                          <label>Description Text Color</label>
                          <input
                            type="color"
                            formControlName="description_text_color"
                            class="form-control"
                            style="width: 50px; height: 40px"
                            (change)="print($event)"
                          />
                          <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                        </div>
                      </div>
                    </div>

                    <div
                      class="col-12 mt-2 m-0 row"
                      [hidden]="settings_obj.menu_option !== 'buttons'"
                    >
                      <!--  -->
                      <h5 class="col-12 text-muted">Square Settings</h5>
                      <div class="ws-100"></div>
                      <div class="col-6">
                        <div
                          class="form-group"
                          style="display: flex; flex-direction: column"
                        >
                          <label for="button_border_radius_range" color="gray">
                            Button Border Radius
                            {{
                              settings_form
                                .get("grid_info")
                                .get("button_border_radius").value
                            }}%
                          </label>
                          <input
                            type="range"
                            class="custom-range"
                            min="0"
                            max="50"
                            step="1"
                            id="button_border_radius_range"
                            formControlName="button_border_radius"
                          />
                        </div>
                      </div>

                      <div class="col-6">
                        <div
                          class="form-group"
                          style="display: flex; flex-direction: column"
                        >
                          <label for="button_spacing_range" color="gray">
                            Button Spacing
                            {{
                              settings_form
                                .get("grid_info")
                                .get("button_spacing").value
                            }}
                          </label>
                          <input
                            type="range"
                            class="custom-range"
                            min="0"
                            max="20"
                            step="0.25"
                            id="button_spacing_range"
                            formControlName="button_spacing"
                          />
                        </div>
                      </div>

                      <div class="ws-100"></div>
                      <h5 class="col-12 text-muted">Shadow Settings</h5>
                      <div class="ws-100"></div>
                      <div class="col-1">
                        <div
                          class="form-group"
                          style="display: flex; flex-direction: column"
                        >
                          <label>Color</label>
                          <input
                            type="color"
                            formControlName="shadow_color"
                            class="form-control"
                            style="width: 50px; height: 40px"
                            (change)="print($event)"
                          />
                          <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                        </div>
                      </div>

                      <div class="col-5">
                        <div
                          class="form-group"
                          style="display: flex; flex-direction: column"
                        >
                          <label for="shadow_spread_range" color="gray">
                            Spread
                            {{
                              settings_form
                                .get("grid_info")
                                .get("shadow_spread").value
                            }}
                          </label>
                          <input
                            type="range"
                            class="custom-range"
                            min="0"
                            max="1"
                            step="0.05"
                            id="shadow_spread_range"
                            formControlName="shadow_spread"
                          />
                        </div>
                      </div>

                      <div class="col-5">
                        <div
                          class="form-group"
                          style="display: flex; flex-direction: column"
                        >
                          <label for="shadow_blur_range" color="gray">
                            Blur
                            {{
                              settings_form.get("grid_info").get("shadow_blur")
                                .value
                            }}
                          </label>
                          <input
                            type="range"
                            class="custom-range"
                            min="0"
                            max="3"
                            step="0.05"
                            id="shadow_blur_range"
                            formControlName="shadow_blur"
                          />
                        </div>
                      </div>
                      <div
                        class="ws-100"
                        [hidden]="!show_display_more_button"
                      ></div>
                      <h5
                        class="col-12 text-muted"
                        [hidden]="!show_display_more_button"
                      >
                        Button Settings
                      </h5>
                      <div
                        class="ws-100"
                        [hidden]="!show_display_more_button"
                      ></div>
                      <div class="col-3" [hidden]="!show_display_more_button">
                        <div
                          class="form-group"
                          style="display: flex; flex-direction: column"
                        >
                          <label>Button Text Color</label>
                          <input
                            type="color"
                            formControlName="button_more_color"
                            class="form-control"
                            style="width: 50px; height: 40px"
                            (change)="print($event)"
                          />
                          <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                        </div>
                      </div>
                    </div>
                  </form>

                  <div class="ws-100"></div>
                  <div
                    [formGroup]="actual_tab_control.get('settings')"
                    class="col-12"
                    *ngIf="
                      can_edit &&
                      actualPage == 2 &&
                      actual_tab_control.get('settings')
                    "
                  >
                    <div
                      class="row"
                      formArrayName="categories"
                      cdkDropList
                      cdkDropListOrientation="vertical"
                      [ngClass]="can_edit ? 'category-drag-list' : ''"
                      (cdkDropListDropped)="
                        sortCategoriesArray(
                          settings_categories_form.controls,
                          $event
                        )
                      "
                    >
                      <div
                        [formGroupName]="i"
                        class="col-12 row m-0"
                        *ngFor="
                          let item of settings_categories_form.controls;
                          let i = index;
                          let last_ = last;
                          let f = first
                        "
                        cdkDrag
                        [cdkDragDisabled]="!can_edit"
                        [cdkDragLockAxis]="'y'"
                        [ngClass]="{
                          'category-drag-box': can_edit
                        }"
                      >
                        <div class="col-4 align-self-center">
                          <label
                            class="hide-control"
                            *ngIf="i === 0"
                            for="idOrganization"
                          >
                            Categories to show
                          </label>
                          <div
                            class="form-group"
                            style="display: flex; flex-direction: column"
                          >
                            <select
                              required
                              class="hide-control form-control"
                              formControlName="idCategoryArticle"
                              (ngModelChange)="
                                setCategoryInfo(settings_categories_form.at(i))
                              "
                            >
                              <!-- <option *ngIf="!iglesia.col6_grid" value="0"></option> -->
                              <option
                                *ngFor="
                                  let category of categories_left(
                                    settings_categories_form
                                      .at(i)
                                      .get('idCategoryArticle').value,
                                    settings_categories_form
                                  )
                                "
                                [value]="category.idCategoriaArticulo"
                              >
                                {{ category.nombre | translate }}
                              </option>
                            </select>
                            <span class="name-span" style="display: none">
                              {{
                                getCategory(
                                  settings_categories_form
                                    .at(i)
                                    .get("idCategoryArticle").value
                                )?.nombre || "None" | translate
                              }}
                            </span>
                          </div>
                        </div>
                        <div class="col-2">
                          <label
                            class="hide-control"
                            *ngIf="i === 0"
                            for="idOrganization"
                          >
                            Items per row
                          </label>
                          <div
                            class="form-group"
                            style="display: flex; flex-direction: column"
                          >
                            <select
                              required
                              formControlName="col_size"
                              class="form-control w-100 hide-control"
                            >
                              <option value="12">1 per row</option>
                              <option value="6">2 per row</option>
                              <option value="4">3 per row</option>
                              <option value="3">4 per row</option>
                            </select>
                          </div>
                        </div>
                        <div class="col-4 col-md-3">
                          <div
                            class="form-group"
                            style="display: flex; flex-direction: column"
                          >
                            <label
                              class="hide-control"
                              *ngIf="i === 0"
                              for="idOrganization"
                            >
                              Sort type
                            </label>
                            <select
                              required
                              class="hide-control form-control"
                              formControlName="sort_type"
                              (ngModelChange)="changeContactUrl()"
                            >
                              <option value="date_asc">
                                First created first
                              </option>
                              <option value="date_desc">
                                Last created first
                              </option>
                              <option value="alpha_asc">Alphabetical</option>
                              <option value="alpha_desc">
                                Reverse alphabetical
                              </option>
                            </select>
                          </div>
                        </div>
                        <div class="col-2 align-self-center text-right">
                          <div
                            class="btn-group mr-2"
                            *ngIf="
                              last_ &&
                              categories_left(
                                settings_categories_form
                                  .at(i)
                                  .get('idCategoryArticle').value,
                                settings_categories_form
                              ).length > 1 &&
                              settings_categories_form
                                .at(i)
                                .get('idCategoryArticle').value
                            "
                          >
                            <button
                              (click)="addCategoryToSettings()"
                              class="btn btn-sm btn-success"
                            >
                              <i class="fa fa-plus"> </i>
                            </button>
                          </div>
                          <div class="btn-group">
                            <button
                              (click)="removeCategoryFromSettings(i)"
                              class="btn btn-sm btn-danger mr-2"
                            >
                              <i class="fa fa-trash"> </i>
                            </button>
                            <button
                              (click)="openStylePopup(item, 'category')"
                              class="btn btn-sm btn-info mr-2"
                            >
                              <i class="fa fa-pencil"> </i>
                            </button>
                          </div>
                          <div
                            class="btn-group"
                            *ngIf="settings_categories_form.length > 0"
                          >
                            <!-- <button
                              *ngIf="
                                !f &&
                                settings_categories_form
                                  .at(i)
                                  .get('idCategoryArticle').value
                              "
                              class="btn btn-sm"
                              (click)="
                                onSortItem(
                                  settings_categories_form.controls,
                                  item,
                                  'up'
                                )
                              "
                            >
                              <i class="fa fa-arrow-up"></i>
                            </button>
                            <button
                              *ngIf="
                                !last_ &&
                                settings_categories_form
                                  .at(i)
                                  .get('idCategoryArticle').value
                              "
                              class="btn btn-sm"
                              (click)="
                                onSortItem(
                                  settings_categories_form.controls,
                                  item,
                                  'down'
                                )
                              "
                            >
                              <i class="fa fa-arrow-down"></i>
                            </button> -->
                            <div
                              *ngIf="can_edit"
                              class="example-handle"
                              cdkDragHandle
                            >
                              <svg
                                width="24px"
                                fill="currentColor"
                                viewBox="0 0 24 24"
                              >
                                <path
                                  d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"
                                ></path>
                                <path d="M0 0h24v24H0z" fill="none"></path>
                              </svg>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="col-4">
                    <button
                      *ngIf="can_edit"
                      class="btn btn-sm btn-success mr-2"
                      (click)="showCategories(manage_categories_modal)"
                    >
                      Manage categories
                    </button>
                    <button
                      type="button"
                      *ngIf="can_edit"
                      class="btn btn-success btn-sm"
                      (click)="toggleEditMode()"
                      [ngClass]="{ 'btn-warning': can_edit }"
                    >
                      {{ editMode ? "Cancel" : "Edit" }}
                    </button>
                    <button
                      type="button"
                      *ngIf="can_edit"
                      class="btn btn-success btn-sm"
                      (click)="saveIglesia()"
                      [disabled]="!checkFields()"
                    >
                      <i class="fa fa-save"></i>
                      Save
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="property-box-list">
              <ng-container>
                <div class="row">
                  <!-- For -->
                  <app-profile-articles-display
                    #sub_articles_display
                    *ngIf="categories_to_display.length > 0"
                    class="col-12"
                    [is_main_page]="false"
                    [grid_info_settings]="
                      settings_form?.get('grid_info')?.value
                    "
                    [idOrganization]="iglesiaId || currentUser?.idIglesia"
                    [view_mode]="can_edit ? 'edition' : 'detail'"
                    [categories]="categories_to_display"
                    [categories_tab]="settings_form.value.categories"
                    (onAddArticle)="addArticle($event, sub_articles_display)"
                    (onEditArticle)="editArticle($event, sub_articles_display)"
                  >
                  </app-profile-articles-display>
                </div>
              </ng-container>
              <!-- AQUI COMIENZA -->
              <!-- If edit mode -->
            </div>
          </ng-template>
        </div>
      </div>
      <!-- End Us -->

      <div
        class="row mt-3 text-center justify-content-end"
        *ngIf="!loadingIglesia"
        [ngStyle]="{ display: actualPage == 7 ? '' : 'none' }"
      >
        <div
          class="col-12"
          [formGroup]="actual_tab_control.get('settings')"
          *ngIf="
            can_edit && actualPage == 7 && actual_tab_control.get('settings')
          "
        >
          <div
            class="row mx-0"
            *ngIf="can_edit"
            formArrayName="categories"
            cdkDropList
            cdkDropListOrientation="vertical"
            [ngClass]="can_edit ? 'category-drag-list' : ''"
            (cdkDropListDropped)="
              sortCategoriesArray(settings_categories_form.controls, $event)
            "
          >
            <div
              [formGroupName]="i"
              class="col-12 row m-0"
              *ngFor="
                let item of settings_categories_form.controls;
                let i = index;
                let last_ = last;
                let f = first
              "
              cdkDrag
              [cdkDragDisabled]="!can_edit"
              [cdkDragLockAxis]="'y'"
              [ngClass]="{
                'category-drag-box': can_edit
              }"
            >
              <label
                class="col-12 hide-control"
                *ngIf="i === 0"
                for="idOrganization"
              >
                <h5>Inboxes to show</h5>
              </label>
              <div class="col-5 align-self-center">
                <div
                  class="form-group"
                  style="display: flex; flex-direction: column"
                >
                  <select
                    required
                    class="hide-control form-control"
                    formControlName="idMailingList"
                    (ngModelChange)="changeContactUrl()"
                  >
                    <option
                      *ngFor="
                        let category of contact_inboxes_left(
                          settings_categories_form.at(i).get('idMailingList')
                            .value
                        )
                      "
                      [value]="category.id"
                    >
                      {{ category.name | translate }}
                    </option>
                  </select>
                  <span class="name-span" style="display: none">
                    {{
                      getElement(
                        settings_categories_form.at(i).get("idMailingList")
                          .value,
                        iglesia.inboxes,
                        "id"
                      )?.name | translate
                    }}
                  </span>
                </div>
              </div>
              <div class="col-3 align-self-center">
                <div
                  class="form-group"
                  style="display: flex; flex-direction: column"
                >
                  <select
                    required
                    class="hide-control form-control"
                    formControlName="contact_language"
                    (ngModelChange)="changeContactUrl()"
                  >
                    <option value="es">Español</option>
                    <option value="en">English</option>
                  </select>
                </div>
              </div>
              <div class="col-4 text-right align-self-center">
                <div
                  class="btn-group mr-2"
                  *ngIf="
                    last_ &&
                    contact_inboxes_left(
                      settings_categories_form.at(i).get('idMailingList').value
                    ).length > 1 &&
                    settings_categories_form.at(i).get('idMailingList').value
                  "
                >
                  <button
                    (click)="addContactInbox()"
                    class="btn btn-sm btn-success"
                  >
                    <i class="fa fa-plus"> </i>
                  </button>
                </div>
                <div class="btn-group">
                  <button
                    (click)="removeContactInbox(i)"
                    class="btn btn-sm btn-danger mr-2"
                  >
                    <i class="fa fa-trash"> </i>
                  </button>

                  <button
                    (click)="openStylePopup(item, 'contact')"
                    class="btn btn-sm btn-info mr-2"
                  >
                    <i class="fa fa-pencil"> </i>
                  </button>
                </div>
                <div
                  class="btn-group"
                  *ngIf="settings_categories_form.length > 0"
                >
                  <div *ngIf="can_edit" class="example-handle" cdkDragHandle>
                    <svg width="24px" fill="currentColor" viewBox="0 0 24 24">
                      <path
                        d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"
                      ></path>
                      <path d="M0 0h24v24H0z" fill="none"></path>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- <div class="col-4 mb-3" *ngIf="can_edit">
          <select
            required
            class="form-control"
            [(ngModel)]="iglesia.inboxId"
            (ngModelChange)="changeContactUrl()"
          >
            <option *ngIf="!iglesia.inboxId" value="0"></option>
            <option *ngFor="let inbox of iglesia.inboxes" [value]="inbox.id">
              {{ inbox.name }}
            </option>
          </select>
        </div> -->
        <div class="col-4 mb-3" *ngIf="can_edit">
          <div class="btn-group" *ngIf="editMode">
            <button
              type="button"
              *ngIf="editMode"
              class="btn btn-warning btn-sm"
              (click)="toggleEditMode()"
            >
              Cancel
            </button>
            <button
              class="btn btn-sm btn-success"
              (click)="saveIglesia()"
              [disabled]="!checkFields()"
            >
              Save
            </button>
          </div>
        </div>
        <div
          *ngIf="contact_inboxes_to_display.length > 0 && actualPage == 7"
          class="roundedDiv col-12 text-center shadow row justify-content-center"
        >
          <app-profile-contact-inbox-display
            #contact_display
            style="display: block"
            *ngIf="contact_inboxes_to_display.length > 0"
            class="col-11"
            [idOrganization]="iglesiaId || currentUser?.idIglesia"
            [view_mode]="can_edit ? 'edition' : 'detail'"
            [contact_inboxes]="contact_inboxes_to_display"
            [contact_inboxes_tab]="settings_form.value.categories"
            [style_settings]="grid_template_form.value"
          >
          </app-profile-contact-inbox-display>
          <!-- <iframe
            [src]="contactSafeUrl"
            style="
              width: 100%;
              height: 1100px;
              overflow: hidden;
              border-radius: 15px;
            "
            frameBorder="0"
          >
          </iframe> -->
        </div>
        <div
          *ngIf="
            !iglesia?.contact_inboxes_to_display &&
            iglesia?.inboxes?.length != 0 &&
            can_edit
          "
          class="roundedDiv col-12 text-center shadow"
        >
          <h2>
            No tienes un formulario de contacto seleccionado. Por favor, escoge
            uno en el selector de arriba. Muchas gracias!
          </h2>
        </div>
        <div
          *ngIf="
            !iglesia.contact_inboxes_to_display &&
            iglesia?.inboxes?.length == 0 &&
            can_edit
          "
          class="roundedDiv col-12 text-center shadow"
        >
          <h2>
            No tienes ningún formulario de contacto creado. Ingresa al botón de
            abajo para crear uno!
          </h2>
          <button
            type="button"
            routerLink="/mailing-list"
            class="btn btn-success btn-sm"
          >
            <i class="fa fa-save"></i>
            Contactos
          </button>
        </div>
      </div>
      <div
        class="row mt-3 text-center justify-content-end"
        *ngIf="!loadingIglesia"
        [ngStyle]="{ display: actualPage == 8 ? '' : 'none' }"
      >
        <div
          class="col-12"
          [formGroup]="actual_tab_control.get('settings')"
          *ngIf="
            can_edit && actualPage == 8 && actual_tab_control.get('settings')
          "
        >
          <div
            class="row mx-0"
            *ngIf="can_edit"
            formArrayName="categories"
            cdkDropList
            cdkDropListOrientation="vertical"
            [ngClass]="can_edit ? 'category-drag-list' : ''"
            (cdkDropListDropped)="
              sortCategoriesArray(settings_categories_form.controls, $event)
            "
          >
            <div
              [formGroupName]="i"
              class="col-12 row m-0"
              *ngFor="
                let item of settings_categories_form.controls;
                let i = index;
                let last_ = last;
                let f = first
              "
              cdkDrag
              [cdkDragDisabled]="!can_edit"
              [cdkDragLockAxis]="'y'"
              [ngClass]="{
                'category-drag-box': can_edit
              }"
            >
              <label
                class="col-12 hide-control"
                *ngIf="i === 0"
                for="idOrganization"
              >
                <h5>Community Boxes to show</h5>
              </label>
              <div class="col-5 align-self-center">
                <div
                  class="form-group"
                  style="display: flex; flex-direction: column"
                >
                  <select
                    required
                    class="hide-control form-control"
                    formControlName="idCommunityBox"
                    (ngModelChange)="changeContactUrl()"
                  >
                    <option
                      *ngFor="
                        let category of community_boxes_left(
                          settings_categories_form.at(i).get('idCommunityBox')
                            .value
                        )
                      "
                      [value]="category.id"
                    >
                      {{ category.name | translate }}
                    </option>
                  </select>
                  <span class="name-span" style="display: none">
                    {{
                      getElement(
                        settings_categories_form.at(i).get("idCommunityBox")
                          .value,
                        iglesia.community_boxes,
                        "id"
                      )?.name | translate
                    }}
                  </span>
                </div>
              </div>
              <div class="col-3 align-self-center">
                <div class="col-2 align-self-center">
                  <div class="form-group form-check">
                    <input
                      formControlName="display_new_style"
                      type="checkbox"
                      class="hide-control form-check-input"
                      id="shadow_check"
                      (ngModelChange)="changeContactUrl()"
                    />
                    <label
                      class="hide-control form-check-label"
                      for="shadow_check"
                    >
                      Use new style?
                    </label>
                  </div>
                </div>
              </div>
              <div class="col-4 text-right align-self-center">
                <div
                  class="btn-group mr-2"
                  *ngIf="
                    last_ &&
                    community_boxes_left(
                      settings_categories_form.at(i).get('idCommunityBox').value
                    ).length > 1 &&
                    settings_categories_form.at(i).get('idCommunityBox').value
                  "
                >
                  <button
                    (click)="addCommunityBox()"
                    class="btn btn-sm btn-success"
                  >
                    <i class="fa fa-plus"> </i>
                  </button>
                </div>
                <div class="btn-group">
                  <button
                    (click)="removeCommunityBox(i)"
                    class="btn btn-sm btn-danger"
                  >
                    <i class="fa fa-trash"> </i>
                  </button>

                  <button
                    (click)="openStylePopup(item, 'community')"
                    class="btn btn-sm btn-info mr-2"
                  >
                    <i class="fa fa-pencil"> </i>
                  </button>
                </div>
                <div
                  class="btn-group"
                  *ngIf="settings_categories_form.length > 0"
                >
                  <div *ngIf="can_edit" class="example-handle" cdkDragHandle>
                    <svg width="24px" fill="currentColor" viewBox="0 0 24 24">
                      <path
                        d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"
                      ></path>
                      <path d="M0 0h24v24H0z" fill="none"></path>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- <div class="col-4 mb-3" *ngIf="can_edit">
          <select
            required
            class="form-control"
            [(ngModel)]="iglesia.galleryId"
            (ngModelChange)="changeContactUrl()"
          >
            <option *ngIf="!iglesia.galleryId" value="0"></option>
            <option
              *ngFor="let gallery of iglesia.community_boxes"
              [value]="gallery.id"
            >
              {{ gallery.name }}
            </option>
          </select>
        </div> -->
        <div class="col-4 mb-3" *ngIf="can_edit">
          <div class="btn-group" *ngIf="editMode">
            <button
              type="button"
              *ngIf="editMode"
              class="btn btn-warning btn-sm"
              (click)="toggleEditMode()"
            >
              Cancel
            </button>
            <button
              class="btn btn-sm btn-success"
              (click)="saveIglesia()"
              [disabled]="!checkFields()"
            >
              Save
            </button>
          </div>
        </div>
        <div
          *ngIf="community_boxes_to_display.length > 0 && actualPage == 8"
          class="roundedDiv col-12 text-center shadow row justify-content-center"
        >
          <!-- [grid_info_settings]="grid_template_form.value" -->
          <app-profile-community-boxes-display
            #community_display
            style="display: block"
            *ngIf="community_boxes_to_display.length > 0"
            class="col-11"
            [idOrganization]="iglesiaId || currentUser?.idIglesia"
            [view_mode]="can_edit ? 'edition' : 'detail'"
            [community_boxes]="community_boxes_to_display"
            [community_boxes_tab]="settings_form.value.categories"
          >
          </app-profile-community-boxes-display>
          <!-- <app-gallery
            *ngFor="let gallery of iglesia?.community_boxes_to_display"
            [idGallery]="gallery.idGallery"
          ></app-gallery> -->
        </div>
        <div
          *ngIf="
            community_boxes_to_display.length === 0 &&
            iglesia?.community_boxes?.length != 0 &&
            can_edit
          "
          class="roundedDiv col-12 text-center shadow"
        >
          <h2>
            No tienes una Comunidad seleccionada. Por favor, escoge una en el
            selector de arriba. Muchas gracias!
          </h2>
        </div>
        <div
          *ngIf="
            community_boxes_to_display.length === 0 &&
            iglesia?.community_boxes?.length == 0 &&
            can_edit
          "
          class="roundedDiv col-12 text-center shadow"
        >
          <h2>
            No tienes ninguna comunidad creada. Ingresa al botón de abajo para
            crear uno!
          </h2>
          <button
            type="button"
            routerLink="/community-box"
            class="btn btn-success btn-sm"
          >
            <i class="fa fa-save"></i>
            {{ "Communities" }}
          </button>
        </div>
      </div>
      <div
        class="row mt-3 justify-content-end"
        *ngIf="!loadingIglesia"
        [ngStyle]="{ display: actualPage == 9 ? '' : 'none' }"
      >
        <div
          class="col-12"
          [formGroup]="actual_tab_control.get('settings')"
          *ngIf="
            can_edit && actualPage == 9 && actual_tab_control.get('settings')
          "
        >
          <div
            class="row mx-0"
            *ngIf="can_edit"
            formArrayName="categories"
            cdkDropList
            cdkDropListOrientation="vertical"
            [ngClass]="can_edit ? 'category-drag-list' : ''"
            (cdkDropListDropped)="
              sortCategoriesArray(settings_categories_form.controls, $event)
            "
          >
            <div
              [formGroupName]="i"
              class="col-12 row m-0"
              *ngFor="
                let item of settings_categories_form.controls;
                let i = index;
                let last_ = last;
                let f = first
              "
              cdkDrag
              [cdkDragDisabled]="!can_edit"
              [cdkDragLockAxis]="'y'"
              [ngClass]="{
                'category-drag-box': can_edit
              }"
            >
              <label
                class="hide-control col-12"
                *ngIf="i === 0"
                for="idOrganization"
              >
                <h5>Playlists to show</h5>
              </label>
              <div class="col-12 col-md-5 align-self-center">
                <div
                  class="form-group"
                  style="display: flex; flex-direction: column"
                >
                  <select
                    required
                    class="hide-control form-control"
                    formControlName="idPlaylist"
                    (ngModelChange)="changeContactUrl()"
                  >
                    <option
                      *ngFor="
                        let category of playlists_left(
                          settings_categories_form.at(i).get('idPlaylist').value
                        )
                      "
                      [value]="category.idPlaylist"
                    >
                      {{ category.name | translate }}
                    </option>
                  </select>
                  <span class="name-span" style="display: none">
                    {{
                      getElement(
                        settings_categories_form.at(i).get("idPlaylist").value,
                        iglesia.playlists,
                        "idPlaylist"
                      )?.name | translate
                    }}
                  </span>
                </div>
              </div>
              <div class="col-8 col-md-3">
                <div
                  class="form-group"
                  style="display: flex; flex-direction: column"
                >
                  <select
                    required
                    class="hide-control form-control"
                    formControlName="sort_type"
                    (ngModelChange)="changeContactUrl()"
                  >
                    <option value="date_asc">First created first</option>
                    <option value="date_desc">Last created first</option>
                    <option value="alpha_asc">Alphabetical</option>
                    <option value="alpha_desc">Reverse alphabetical</option>
                  </select>
                </div>
              </div>
              <div class="col-4 text-right align-self-center">
                <div
                  class="btn-group mr-2"
                  *ngIf="
                    last_ &&
                    playlists_left(
                      settings_categories_form.at(i).get('idPlaylist').value
                    ).length > 1 &&
                    settings_categories_form.at(i).get('idPlaylist').value
                  "
                >
                  <button
                    (click)="addPlaylist()"
                    class="btn btn-sm btn-success"
                  >
                    <i class="fa fa-plus"> </i>
                  </button>
                </div>

                <div class="btn-group">
                  <button
                    (click)="removePlaylist(i)"
                    class="btn btn-sm btn-danger mr-2"
                  >
                    <i class="fa fa-trash"> </i>
                  </button>

                  <button
                    (click)="openStylePopup(item, 'playlist')"
                    class="btn btn-sm btn-info mr-2"
                  >
                    <i class="fa fa-pencil"> </i>
                  </button>
                </div>
                <div
                  class="btn-group"
                  *ngIf="settings_categories_form.length > 0"
                >
                  <div *ngIf="can_edit" class="example-handle" cdkDragHandle>
                    <svg width="24px" fill="currentColor" viewBox="0 0 24 24">
                      <path
                        d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"
                      ></path>
                      <path d="M0 0h24v24H0z" fill="none"></path>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- <div class="col-4 mb-3" *ngIf="can_edit">
          <select
            required
            class="form-control"
            [(ngModel)]="iglesia.galleryId"
            (ngModelChange)="changeContactUrl()"
          >
            <option *ngIf="!iglesia.galleryId" value="0"></option>
            <option
              *ngFor="let gallery of iglesia.playlists"
              [value]="gallery.id"
            >
              {{ gallery.name }}
            </option>
          </select>
        </div> -->
        <div class="col-4 mb-3" *ngIf="can_edit">
          <div class="btn-group" *ngIf="editMode">
            <button
              type="button"
              *ngIf="editMode"
              class="btn btn-warning btn-sm"
              (click)="toggleEditMode()"
            >
              Cancel
            </button>
            <button
              class="btn btn-sm btn-success"
              (click)="saveIglesia()"
              [disabled]="!checkFields()"
            >
              Save
            </button>
          </div>
        </div>
        <div
          *ngIf="playlists_to_display.length > 0 && actualPage == 9"
          class="roundedDiv col-12 shadow row justify-content-center"
        >
          <!-- [grid_info_settings]="grid_template_form.value" -->
          <app-profile-playlists-display
            #playlist_display
            style="display: block"
            *ngIf="playlists_to_display.length > 0"
            class="col-11"
            [idOrganization]="iglesiaId || currentUser?.idIglesia"
            [view_mode]="can_edit ? 'edition' : 'detail'"
            [playlists]="playlists_to_display"
            [playlists_tab]="settings_form.value.categories"
            [style_settings]="grid_template_form.value"
          >
          </app-profile-playlists-display>
          <!-- <app-gallery
            *ngFor="let gallery of iglesia?.playlists_to_display"
            [idGallery]="gallery.idGallery"
          ></app-gallery> -->
        </div>
        <div
          *ngIf="
            iglesia?.playlists_to_display.length === 0 &&
            iglesia?.playlists?.length != 0 &&
            can_edit
          "
          class="roundedDiv col-12 text-center shadow"
        >
          <h2>
            No tienes una Playlist seleccionada. Por favor, escoge una en el
            selector de arriba. Muchas gracias!
          </h2>
        </div>
        <div
          *ngIf="
            iglesia?.playlists_to_display.length === 0 &&
            iglesia?.playlists?.length == 0 &&
            can_edit
          "
          class="roundedDiv col-12 text-center shadow"
        >
          <h2>
            No tienes ninguna playlist creada. Ingresa al botón de abajo para
            crear uno!
          </h2>
          <button
            type="button"
            routerLink="/videos"
            class="btn btn-success btn-sm"
          >
            <i class="fa fa-save"></i>
            {{ "Playlists" }}
          </button>
        </div>
      </div>

      <div
        class="row mt-3 text-center justify-content-end mx-0-small"
        *ngIf="!loadingIglesia"
        [ngStyle]="{ display: actualPage == 6 ? '' : 'none' }"
      >
        <div
          class="col-12"
          [formGroup]="actual_tab_control.get('settings')"
          *ngIf="
            can_edit && actualPage == 6 && actual_tab_control.get('settings')
          "
        >
          <div
            class="row mx-0"
            *ngIf="can_edit"
            formArrayName="categories"
            cdkDropList
            cdkDropListOrientation="vertical"
            [ngClass]="can_edit ? 'category-drag-list' : ''"
            (cdkDropListDropped)="
              sortCategoriesArray(settings_categories_form.controls, $event)
            "
          >
            <div
              [formGroupName]="i"
              class="col-12 row m-0"
              *ngFor="
                let item of settings_categories_form.controls;
                let i = index;
                let last_ = last;
                let f = first
              "
              cdkDrag
              [cdkDragDisabled]="!can_edit"
              [cdkDragLockAxis]="'y'"
              [ngClass]="{
                'category-drag-box': can_edit
              }"
            >
              <div class="col-12 col-md-5 align-self-start">
                <div
                  class="form-group"
                  style="display: flex; flex-direction: column"
                >
                  <label *ngIf="i == 0"> View mode </label>
                  <select
                    formControlName="idGalleryViewMode"
                    class="form-control"
                    (change)="
                      checkActualViewSetting(settings_categories_form.at(i))
                    "
                  >
                    <option value="1"
                    [disabled]="
                        galleries_left(settings_categories_form.at(i))
                          .length == 0
                      "
                      >
                      Gallery
                    </option>
                    <option
                      value="2"
                      [disabled]="
                        gallery_albums_left(settings_categories_form.at(i))
                          .length == 0
                      "
                    >
                      Album
                    </option>
                  </select>
                </div>
              </div>
              <div class="col-10 col-md-5 align-self-center">
                <div
                  class="form-group"
                  style="display: flex; flex-direction: column"
                  *ngIf="
                    settings_categories_form.at(i).get('idGalleryViewMode')
                      .value == 1
                  "
                >
                  <label
                    class="hide-control col-12"
                    *ngIf="i === 0"
                    for="idOrganization"
                  >
                    Gallery to show
                  </label>
                  <select
                    required
                    class="hide-control form-control"
                    formControlName="idGallery"
                    (ngModelChange)="changeContactUrl()"
                  >
                    <option
                      *ngFor="
                        let category of galleries_left(
                          settings_categories_form.at(i)
                        )
                      "
                      [value]="category.id"
                    >
                      {{ category.name | translate }}
                    </option>
                  </select>
                  <span class="name-span" style="display: none">
                    {{
                      getElement(
                        settings_categories_form.at(i).get("idGallery").value,
                        iglesia.galleries,
                        "id"
                      )?.name | translate
                    }}
                  </span>
                </div>
                <div
                  class="form-group"
                  style="display: flex; flex-direction: column"
                  *ngIf="
                    settings_categories_form.at(i).get('idGalleryViewMode')
                      .value == 2
                  "
                >
                  <label
                    class="hide-control col-12"
                    *ngIf="i === 0"
                    for="idOrganization"
                  >
                    Album to show
                  </label>
                  <select
                    required
                    class="hide-control form-control"
                    formControlName="idGalleryAlbum"
                    (ngModelChange)="
                      setGroupCategory(settings_categories_form.at(i))
                    "
                  >
                    <option
                      *ngFor="
                        let category of gallery_albums_left(
                          settings_categories_form.at(i)
                        )
                      "
                      [value]="category.id"
                    >
                      {{ category.name | translate }}
                    </option>
                  </select>
                  <span class="name-span" style="display: none">
                    {{
                      getElement(
                        settings_categories_form.at(i).get("idGalleryAlbum")
                          .value,
                        gallery_albums,
                        "id"
                      )?.name | translate
                    }}
                  </span>
                </div>
              </div>
              <div class="col-2 text-right align-self-center">
                <!-- <div
                  class="btn-group mr-2"
                  *ngIf="
                    last_ &&
                    galleries_left(
                      settings_categories_form.at(i).get('idGallery').value
                    ).length > 1 &&
                    settings_categories_form.at(i).get('idGallery').value
                  "
                >
                  <button (click)="addGallery()" class="btn btn-sm btn-success">
                    <i class="fa fa-plus"> </i>
                  </button>
                </div> -->
                <div
                  class="btn-group mr-2"
                  *ngIf="
                    last_ &&
                    canAddNewGalleryOrAlbum(settings_categories_form.at(i))
                  "
                >
                  <button (click)="addGallery()" class="btn btn-sm btn-success">
                    <i class="fa fa-plus"> </i>
                  </button>
                </div>
                <div class="btn-group">
                  <button
                    (click)="removeGallery(i)"
                    class="btn btn-sm btn-danger mr-2"
                  >
                    <i class="fa fa-trash"> </i>
                  </button>
                  <button
                    (click)="openStylePopup(item, 'gallery')"
                    class="btn btn-sm btn-info mr-2"
                  >
                    <i class="fa fa-pencil"> </i>
                  </button>
                </div>
                <div
                  class="btn-group"
                  *ngIf="settings_categories_form.length > 0"
                >
                  <div *ngIf="can_edit" class="example-handle" cdkDragHandle>
                    <svg width="24px" fill="currentColor" viewBox="0 0 24 24">
                      <path
                        d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"
                      ></path>
                      <path d="M0 0h24v24H0z" fill="none"></path>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- <div class="col-4 mb-3" *ngIf="can_edit">
        <select
          required
          class="form-control"
          [(ngModel)]="iglesia.galleryId"
          (ngModelChange)="changeContactUrl()"
        >
          <option *ngIf="!iglesia.galleryId" value="0"></option>
          <option
            *ngFor="let gallery of iglesia.galleries"
            [value]="gallery.id"
          >
            {{ gallery.name }}
          </option>
        </select>
      </div> -->
        <div class="col-4 mb-3" *ngIf="can_edit">
          <div class="btn-group" *ngIf="editMode">
            <button
              type="button"
              *ngIf="editMode"
              class="btn btn-warning btn-sm"
              (click)="toggleEditMode()"
            >
              Cancel
            </button>
            <button
              class="btn btn-sm btn-success"
              (click)="saveIglesia()"
              [disabled]="!checkFields()"
            >
              Save
            </button>
          </div>
        </div>
        <div
          *ngIf="settings_form?.value.categories?.length > 0 && actualPage === 6"
          class="roundedDiv col-12 text-center shadow row justify-content-center mx-0-small"
        >
          <!-- [grid_info_settings]="grid_template_form.value" -->
          <app-profile-galleries-display
            #galleries_display
            style="display: block"
            *ngIf="settings_form.value.categories.length > 0"
            class="col-11"
            [idOrganization]="iglesiaId || currentUser?.idIglesia"
            [view_mode]="can_edit ? 'edition' : 'detail'"
            [galleries]="settings_form.value.categories"
            [galleries_tab]="settings_form.value.categories"
            [style_settings]="grid_template_form.value"
          >
          </app-profile-galleries-display>

          <!-- <app-profile-articles-display
          #sub_articles_display
          *ngIf="categories_to_display.length > 0"
          class="col-12"
          [is_main_page]="false"
          [grid_info_settings]="
            settings_form?.get('grid_info')?.value
          "
          [idOrganization]="iglesiaId || currentUser?.idIglesia"
          [view_mode]="can_edit ? 'edition' : 'detail'"
          [categories]="categories_to_display"
          [categories_tab]="settings_form.value.categories"
          (onAddArticle)="addArticle($event, sub_articles_display)"
          (onEditArticle)="editArticle($event, sub_articles_display)"
        >
        </app-profile-articles-display> -->

          <!-- <app-gallery
          *ngFor="let gallery of iglesia?.galleries_to_display"
          [idGallery]="gallery.idGallery"
        ></app-gallery> -->
        </div>
        <div
          *ngIf="
            iglesia?.galleries_to_display.length === 0 &&
            iglesia?.galleries?.length != 0 &&
            can_edit
          "
          class="roundedDiv col-12 text-center shadow"
        >
          <h2>
            No tienes una galeria seleccionada. Por favor, escoge una en el
            selector de arriba. Muchas gracias!
          </h2>
        </div>
        <div
          *ngIf="
            iglesia?.galleries_to_display.length === 0 &&
            iglesia?.galleries?.length == 0 &&
            can_edit
          "
          class="roundedDiv col-12 text-center shadow"
        >
          <h2>
            No tienes ninguna galeria creada. Ingresa al botón de abajo para
            crear uno!
          </h2>
          <button
            type="button"
            [routerLink]="['/galleries/home']"
            [queryParams]="{ tab: 'galleries' }"
            class="btn btn-success btn-sm"
          >
            <i class="fa fa-save"></i>
            {{ "Galleries" }}
          </button>
        </div>
      </div>

      <!-- <div *ngIf="actualPage == 1" class="row mt-3 m-0">
        <app-section-container
          class="col-12"
          [init]="true"
          [idOrganization]="iglesiaId || currentUser?.idIglesia"
          [view_mode]="can_edit ? 'edition' : 'detail'"
          [iglesia]="iglesia_full_data"
          (refresh_meetings)="refreshMeetingsOnNetwork()"
          [selected_category_on_main]="selected_category_on_main"
          [grid_template_form]="grid_template_form"
        ></app-section-container>
      </div> -->

      <div *ngIf="actualPage == 1" class="row mt-3 mx-0">
        <!-- Profile pic -->
        <div *ngIf="can_edit" class="col-12 mb-3">
          <div class="row">
            <div class="col-12 px-0">
              <ng-template [ngIf]="!loadingIglesia">
                <div class="roundedDiv text-center mb-3 shadow">
                  <div class="row m-0">
                    <div class="col-2 align-self-center">
                      <div class="form-group form-check">
                        <input
                          [(ngModel)]="iglesia.header_menu_settings.show_icon"
                          (ngModelChange)="
                            wasEdited(); edit_object.home_info = true
                          "
                          type="checkbox"
                          class="form-check-input"
                          id="shadow_check"
                        />
                        <label class="form-check-label" for="shadow_check">
                          Show icon
                        </label>
                      </div>
                    </div>
                    <div class="col-2 col-md-2">
                      <div
                        class="form-group align-items-center"
                        style="display: flex; flex-direction: column"
                      >
                        <label>
                          <span class="tooltip_">
                            <span class="tooltiptext">
                              Changes the background color of nav bar.
                            </span>
                            <small> Background </small>
                            <i class="text-secondary fa fa-info-circle"></i>
                          </span>
                        </label>
                        <input
                          type="color"
                          [(ngModel)]="
                            iglesia.header_menu_settings.background_color
                          "
                          (ngModelChange)="
                            wasEdited(); edit_object.home_info = true
                          "
                          class="form-control"
                          style="width: 50px; height: 40px"
                        />
                        <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                      </div>
                      <div
                        class="form-group align-items-center"
                        style="display: flex; flex-direction: column"
                      >
                        <label>
                          <span class="tooltip_">
                            <span class="tooltiptext">
                              Changes the background color of the active tab.
                            </span>
                            <small> Active </small>
                            <i class="text-secondary fa fa-info-circle"></i>
                          </span>
                        </label>
                        <input
                          type="color"
                          [(ngModel)]="
                            iglesia.header_menu_settings.active_color
                          "
                          (ngModelChange)="
                            wasEdited(); edit_object.home_info = true
                          "
                          class="form-control"
                          style="width: 50px; height: 40px"
                        />
                        <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                      </div>
                    </div>
                    <div class="col-2 col-md-1">
                      <div
                        class="form-group align-items-center"
                        style="display: flex; flex-direction: column"
                      >
                        <label>
                          <span class="tooltip_">
                            <span class="tooltiptext">
                              Changes the text color of nav bar.
                            </span>
                            <small> Color </small>
                            <i class="text-secondary fa fa-info-circle"></i>
                          </span>
                        </label>
                        <input
                          type="color"
                          [(ngModel)]="iglesia.header_menu_settings.text_color"
                          (ngModelChange)="
                            wasEdited(); edit_object.home_info = true
                          "
                          class="form-control"
                          style="width: 50px; height: 40px"
                        />
                        <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                      </div>
                      <div
                        class="form-group align-items-center"
                        style="display: flex; flex-direction: column"
                      >
                        <label>
                          <span class="tooltip_">
                            <span class="tooltiptext">
                              Changes the text color of the active tab.
                            </span>
                            <small> Active </small>
                            <i class="text-secondary fa fa-info-circle"></i>
                          </span>
                        </label>
                        <input
                          type="color"
                          [(ngModel)]="
                            iglesia.header_menu_settings.active_text_color
                          "
                          (ngModelChange)="
                            wasEdited(); edit_object.home_info = true
                          "
                          class="form-control"
                          style="width: 50px; height: 40px"
                        />
                        <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                      </div>
                    </div>
                    <div
                      [hidden]="!iglesia.header_menu_settings.show_icon"
                      class="col-2 col-md-1"
                    >
                      <div
                        class="form-group align-items-center"
                        style="display: flex; flex-direction: column"
                      >
                        <label>
                          <span class="tooltip_">
                            <span class="tooltiptext">
                              The icon's border color
                            </span>
                            <small> Border </small>
                            <i class="text-secondary fa fa-info-circle"></i>
                          </span>
                        </label>
                        <input
                          type="color"
                          [(ngModel)]="
                            iglesia.header_menu_settings.border_color
                          "
                          (ngModelChange)="edit_object.home_info = true"
                          class="form-control"
                          style="width: 50px; height: 40px"
                        />
                        <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                      </div>
                      <div
                        class="form-group align-items-center"
                        style="display: flex; flex-direction: column"
                      >
                        <label>
                          <span class="tooltip_">
                            <span class="tooltiptext">
                              The icon's second border border color
                            </span>
                            <small> Second </small>
                            <i class="text-secondary fa fa-info-circle"></i>
                          </span>
                        </label>
                        <input
                          type="color"
                          [(ngModel)]="
                            iglesia.header_menu_settings.second_border_color
                          "
                          (ngModelChange)="edit_object.home_info = true"
                          class="form-control"
                          style="width: 50px; height: 40px"
                        />
                        <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                      </div>
                    </div>
                    <div
                      [hidden]="!iglesia.header_menu_settings.show_icon"
                      class="col-10 col-md-3 align-self-center"
                    >
                      <div
                        class="form-group"
                        style="display: flex; flex-direction: column"
                      >
                        <label for="degrees_radius" color="gray">
                          Width ({{
                            iglesia.header_menu_settings.border_width
                          }}px)
                        </label>
                        <input
                          type="range"
                          class="custom-range"
                          min="0"
                          max="10"
                          step="1"
                          id="degrees_radius"
                          [(ngModel)]="
                            iglesia.header_menu_settings.border_width
                          "
                          (ngModelChange)="
                            wasEdited(); edit_object.home_info = true
                          "
                        />
                      </div>
                    </div>
                    <div class="col-10 col-md-3 align-self-center">
                      <div class="form-group form-check mb-2 text-left">
                        <input
                          [(ngModel)]="
                            iglesia.header_menu_settings.is_full_width
                          "
                          type="checkbox"
                          class="form-check-input"
                          id="shadow_check"
                          (ngModelChange)="
                            checkBannerSize(); edit_object.home_info = true
                          "
                        />
                        <label class="form-check-label" for="shadow_check">
                          Show banner full width?
                        </label>
                      </div>
                      <div
                        class="form-group form-check mb-2 text-left"
                        [hidden]="iglesia?.free_version"
                      >
                        <input
                          [(ngModel)]="iglesia.display_other"
                          type="checkbox"
                          class="form-check-input"
                          id="shadow_check"
                          (ngModelChange)="
                            wasEdited(); edit_object.home_info = true
                          "
                        />
                        <label class="form-check-label" for="shadow_check">
                          Display right section?
                        </label>
                      </div>
                      <div
                        class="form-group form-check mb-2 text-left"
                        [hidden]="iglesia?.free_version"
                      >
                        <input
                          [(ngModel)]="iglesia.display_left_section"
                          type="checkbox"
                          class="form-check-input"
                          id="shadow_check"
                          (ngModelChange)="
                            wasEdited(); edit_object.home_info = true
                          "
                        />
                        <label class="form-check-label" for="shadow_check">
                          Display left section?
                        </label>
                      </div>
                      <div
                        class="form-group form-check mb-2 text-left"
                        [hidden]="iglesia?.free_version"
                      >
                        <input
                          [(ngModel)]="iglesia.display_events_section"
                          type="checkbox"
                          class="form-check-input"
                          id="shadow_check"
                          (ngModelChange)="
                            wasEdited(); edit_object.home_info = true
                          "
                        />
                        <label class="form-check-label" for="shadow_check">
                          Display events section?
                        </label>
                      </div>
                    </div>

                    <div
                      class="col-12 align-self-center text-right"
                      *ngIf="edit_object.home_info"
                    >
                      <div class="btn-group mb-3">
                        <button
                          type="button"
                          *ngIf="can_edit"
                          class="btn btn-warning btn-sm"
                          (click)="
                            toggleEditMode(); edit_object.home_info = false
                          "
                        >
                          Cancel
                        </button>
                        <button
                          class="btn btn-sm btn-success"
                          (click)="saveIglesia()"
                          *ngIf="editMode"
                        >
                          Save
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="roundedDiv text-center shadow">
                  <div [formGroup]="banner_form" class="row m-0">
                    <div class="col-12">
                      <h3>Banner</h3>
                    </div>
                    <div class="col-2 align-self-center">
                      <div class="form-group form-check">
                        <input
                          formControlName="show_banner"
                          (ngModelChange)="
                            wasEdited(); edit_object.home_banner = true
                          "
                          type="checkbox"
                          class="form-check-input"
                          id="shadow_check"
                        />
                        <label class="form-check-label" for="shadow_check">
                          Show banner
                        </label>
                      </div>
                    </div>
                    <div
                      *ngIf="banner_form.get('show_banner').value"
                      class="col-10 align-self-center"
                    >
                      <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link active"
                            id="source-tab"
                            data-toggle="tab"
                            data-target="#source"
                            type="button"
                            role="tab"
                            aria-controls="source"
                            aria-selected="true"
                          >
                            Source
                          </button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="size-tab"
                            data-toggle="tab"
                            data-target="#size"
                            type="button"
                            role="tab"
                            aria-controls="size"
                            aria-selected="false"
                          >
                            Size
                          </button>
                        </li>
                        <li class="nav-item" role="presentation">
                          <button
                            class="nav-link"
                            id="position-tab"
                            data-toggle="tab"
                            data-target="#position"
                            type="button"
                            role="tab"
                            aria-controls="position"
                            aria-selected="false"
                          >
                            Position
                          </button>
                        </li>
                      </ul>
                      <div class="tab-content" id="myTabContent">
                        <div
                          class="tab-pane fade show active"
                          id="source"
                          role="tabpanel"
                          aria-labelledby="source-tab"
                        >
                          <div class="row mx-0">
                            <input
                              hidden
                              #input
                              type="file"
                              name="photo"
                              class="form-control"
                              accept="image/*"
                              (change)="
                                addDefaultEntryPhoto($event.target.files[0])
                              "
                            />
                            <div class="col-12" #col_img_banner_container>
                              <div
                                class="img-banner-container"
                                [ngStyle]="{
                                  width: container.width,
                                  height: container.height
                                }"
                                #img_banner_container
                              >
                                <img
                                  class="img-banner-cover"
                                  #img_tag
                                  [src]="getBannerCover()"
                                  alt=""
                                />
                              </div>
                            </div>
                            <div class="col-12 mt-2 text-center">
                              <button
                                (click)="input.click()"
                                type="button"
                                class="btn btn-sm btn-success"
                              >
                                Add image
                              </button>
                            </div>
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="size"
                          role="tabpanel"
                          aria-labelledby="size-tab"
                        >
                          <div class="row mx-0">
                            <div class="col-4">
                              <div class="form-group">
                                <label>
                                  Width
                                  <small
                                    >({{ banner_form.get("width").value
                                    }}{{
                                      banner_form.get("width_value").value
                                    }})</small
                                  ></label
                                >
                                <input
                                  min="0"
                                  max="100"
                                  type="range"
                                  formControlName="width"
                                  class="form-control"
                                  (ngModelChange)="
                                    wasEdited(); edit_object.home_banner = true
                                  "
                                />
                              </div>
                            </div>
                            <!-- <div class="col-2">
                              <div class="form-group">
                                <label></label>
                                <select
                                  class="form-control"
                                  formControlName="width_value"
                                >
                                  <option value="px">px</option>
                                  <option value="%">%</option>
                                </select>
                              </div>
                            </div> -->
                            <div class="col-4">
                              <div class="form-group">
                                <label>
                                  Height
                                  <small
                                    >({{ banner_form.get("height").value
                                    }}{{
                                      banner_form.get("height_value").value
                                    }})</small
                                  ></label
                                >
                                <input
                                  [min]="
                                    banner_form.get('height_value').value ===
                                    'px'
                                      ? 40
                                      : 10
                                  "
                                  [max]="
                                    banner_form.get('height_value').value ===
                                    'px'
                                      ? 250
                                      : 100
                                  "
                                  type="range"
                                  formControlName="height"
                                  class="form-control"
                                  (ngModelChange)="
                                    wasEdited(); edit_object.home_banner = true
                                  "
                                />
                              </div>
                            </div>
                            <!-- <div class="col-2">
                              <div class="form-group">
                                <label></label>
                                <select
                                  class="form-control"
                                  formControlName="height_value"
                                >
                                  <option value="px">px</option>
                                  <option value="%">%</option>
                                </select>
                              </div>
                            </div> -->
                          </div>
                        </div>
                        <div
                          class="tab-pane fade"
                          id="position"
                          role="tabpanel"
                          aria-labelledby="position-tab"
                        >
                          <div class="row mx-0">
                            <div class="col-4">
                              <div class="form-group">
                                <label> X Axys</label>
                                <select
                                  formControlName="object_position_x"
                                  class="form-control"
                                  (ngModelChange)="
                                    wasEdited(); edit_object.home_banner = true
                                  "
                                >
                                  <option value="left">Left</option>
                                  <option value="center">Center</option>
                                  <option value="right">Right</option>
                                </select>
                              </div>
                            </div>
                            <div class="col-4">
                              <div class="form-group">
                                <label> Y Axys</label>
                                <select
                                  formControlName="object_position_y"
                                  class="form-control"
                                  (ngModelChange)="
                                    wasEdited(); edit_object.home_banner = true
                                  "
                                >
                                  <option value="top">Top</option>
                                  <option value="center">Center</option>
                                  <option value="bottom">Bottom</option>
                                </select>
                              </div>
                            </div>
                            <div class="col-4">
                              <div class="form-group">
                                <label> Fit</label>
                                <select
                                  formControlName="object_fit"
                                  class="form-control"
                                  (ngModelChange)="
                                    wasEdited(); edit_object.home_banner = true
                                  "
                                >
                                  <option value="contain">Contain</option>
                                  <option value="cover">Cover</option>
                                  <option value="fill">Fill</option>
                                  <option value="none">None</option>
                                  <option value="scale-down">Scale Down</option>
                                </select>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div
                      class="col-12 align-self-center text-right"
                      *ngIf="edit_object.home_banner"
                    >
                      <div class="btn-group mb-3">
                        <button
                          type="button"
                          *ngIf="can_edit"
                          class="btn btn-warning btn-sm"
                          (click)="
                            toggleEditMode(); edit_object.home_banner = false
                          "
                        >
                          Cancel
                        </button>
                        <button
                          class="btn btn-sm btn-success"
                          (click)="saveIglesia()"
                          *ngIf="editMode"
                        >
                          Save
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </div>
          </div>
        </div>

        <div class="col-12" *ngIf="banner_form.get('show_banner').value">
          <div class="row justify-content-center">
            <small *ngIf="can_edit" class="col-12 text-left">
              * You'll see this border only when edit for reference.
            </small>
            <div class="w-100" *ngIf="can_edit"></div>

            <div
              [ngClass]="{
                'example-banner': can_edit
              }"
              class="mb-3 header-banner"
              [ngStyle]="{
                'max-width':
                  banner_form.get('width').value +
                  banner_form.get('width_value').value,
                flex:
                  '0 0 ' +
                  banner_form.get('width').value +
                  banner_form.get('width_value').value,
                'border-radius': banner_form.get('border_radius').value + 'px',
                height:
                  banner_form.get('height').value +
                  banner_form.get('height_value').value
              }"
            >
              <img
                class="header-banner-img"
                [src]="getBannerCover()"
                alt=""
                [ngStyle]="{
                  'object-fit': banner_form.get('object_fit').value,
                  'object-position':
                    banner_form.get('object_position_x').value +
                    ' ' +
                    banner_form.get('object_position_y').value
                }"
              />
            </div>
          </div>
        </div>
        <div
          [hidden]="!iglesia?.display_left_section"
          [ngStyle]="{
            top: height_first_col
          }"
          [ngClass]="{
            'col-md-12': !display_other,
            'col-md-4': display_other
          }"
          #first_column
          id="info_col"
          class="col-xs-12 col-md-4 mb-3 px-0 align-self-start"
        >
          <div class="row">
            <div class="col-12">
              <ng-template [ngIf]="!loadingIglesia">
                <div
                  class="roundedDiv text-center mb-3 shadow"
                  *ngIf="
                    (iglesia?.first_section_containers?.length > 0 &&
                      iglesia.home_profile_sections?.first_text_section
                        .is_active) ||
                    can_edit
                  "
                >
                  <div class="property-box-list" *ngIf="!loadingIglesia">
                    <ng-container>
                      <div
                        class="text-right"
                        *ngIf="
                          can_edit &&
                          iglesia.home_profile_sections?.first_text_section
                            .can_be_hide
                        "
                      >
                        <button
                          class="btn btn-sm"
                          [disabled]="prevent_duplicate"
                          (click)="toggleViewSetting('first_text_section')"
                        >
                          {{
                            iglesia.home_profile_sections?.first_text_section
                              .is_active
                              ? "Hide"
                              : "Show"
                          }}
                          section
                          <i
                            class="fa text-info"
                            [ngClass]="{
                              'fa-eye':
                                !iglesia.home_profile_sections
                                  ?.first_text_section.is_active,
                              'fa-eye-slash':
                                iglesia.home_profile_sections
                                  ?.first_text_section.is_active
                            }"
                          ></i>
                        </button>
                      </div>
                      <div>
                        <app-profile-text-container
                          *ngFor="
                            let container of iglesia?.first_section_containers;
                            let i = index
                          "
                          [can_edit]="can_edit"
                          [loading]="loadingIglesia"
                          [idOrganization]="iglesiaId || currentUser?.idIglesia"
                          [container]="container"
                          [style_settings]="grid_template_form.value"
                          (add_button)="openButtonModal($event)"
                          (on_delete)="
                            removeProfileTextContainer(
                              $event,
                              iglesia?.first_section_containers,
                              i
                            )
                          "
                        ></app-profile-text-container>

                        <div class="row mx-0" *ngIf="can_edit">
                          <div class="col-12 text-center">
                            <hr />
                            <button
                              class="btn btn-sm btn-success col-7"
                              (click)="addTextContainer(1)"
                            >
                              <i class="fa fa-plus"> </i>
                            </button>
                            <hr />
                          </div>
                        </div>
                      </div>
                    </ng-container>
                    <!-- AQUI COMIENZA -->
                    <!-- If edit mode -->
                  </div>
                </div>
              </ng-template>
              <ng-template [ngIf]="!loadingIglesia">
                <div
                  *ngIf="
                    iglesia.home_profile_sections?.organization_info
                      ?.is_active || can_edit
                  "
                  class="roundedDiv mb-3 shadow"
                >
                  <div
                    class="text-right"
                    *ngIf="
                      can_edit &&
                      iglesia.home_profile_sections?.organization_info
                        .can_be_hide
                    "
                  >
                    <button
                      class="btn btn-sm"
                      [disabled]="prevent_duplicate"
                      (click)="toggleViewSetting('organization_info')"
                    >
                      {{
                        iglesia.home_profile_sections?.organization_info
                          .is_active
                          ? "Hide"
                          : "Show"
                      }}
                      section
                      <i
                        class="fa text-info"
                        [ngClass]="{
                          'fa-eye':
                            !iglesia.home_profile_sections?.organization_info
                              .is_active,
                          'fa-eye-slash':
                            iglesia.home_profile_sections?.organization_info
                              .is_active
                        }"
                      ></i>
                    </button>
                  </div>
                  <div class="spaceBetween">
                    <div
                      class="row col-12 p-0 mx-0"
                      [ngStyle]="{
                        'text-align':
                          grid_template_form.value?.home_title_text_align ||
                          'left'
                      }"
                    >
                      <h5
                        *ngIf="!can_edit && checkDireccion()"
                        class="col-12"
                        [ngStyle]="{
                          color:
                            grid_template_form.value?.home_title_text_color ||
                            '#000000',
                          'font-weight':
                            grid_template_form.value?.home_title_text_bold ||
                            'bolder'
                        }"
                      >
                        {{ iglesia.col1 }}
                      </h5>
                      <mat-form-field
                        appearance="outline"
                        class="no-padding mb-3 col8"
                        *ngIf="can_edit"
                      >
                        <mat-label [ngClass]="iglesia.col1 ? '' : 'invalid'">
                        </mat-label>
                        <input
                          style="font-size: 20px"
                          class="font-weight-bold text-dark"
                          type="text"
                          [(ngModel)]="iglesia.col1"
                          matInput
                          (ngModelChange)="
                            wasEdited(); edit_object.col_1_home = true
                          "
                        />
                      </mat-form-field>
                      <div
                        class="col-4 align-self-center text-right mb-3"
                        *ngIf="edit_object.col_1_home"
                      >
                        <div class="btn-group mb-3">
                          <button
                            type="button"
                            *ngIf="can_edit"
                            class="btn btn-warning btn-sm"
                            (click)="
                              toggleEditMode(); edit_object.col_1_home = false
                            "
                          >
                            Cancel
                          </button>
                          <button
                            class="btn btn-sm btn-success"
                            (click)="saveIglesia()"
                            *ngIf="editMode"
                          >
                            Save
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- <app-section-container
                    class="col-12"
                    [idOrganization]="iglesiaId || currentUser?.idIglesia"
                    [view_mode]="can_edit ? 'edition' : 'detail'"
                    [iglesia]="iglesia"
                    (refresh_meetings)="refreshMeetingsOnNetwork()"
                  >
                  </app-section-container> -->
                  <app-organization-contact-section
                    class="subcontainer shadow my-3"
                    [view_mode]="can_edit ? 'edition' : 'detail'"
                    [idOrganization]="iglesiaId || currentUser?.idIglesia"
                    [iglesia]="iglesia"
                    (refresh_meetings)="refreshMeetingsOnNetwork()"
                  >
                  </app-organization-contact-section>
                </div>
              </ng-template>

              <!-- Networks Module -->
              <ng-template [ngIf]="!loadingIglesia">
                <div
                  [hidden]="
                    (!iglesia.home_profile_sections?.networks.is_active ||
                      networks_profile?.networks?.length === 0) &&
                    !can_edit
                  "
                  class="roundedDiv text-center mb-3 shadow"
                >
                  <div
                    class="text-right"
                    *ngIf="
                      can_edit &&
                      iglesia.home_profile_sections?.networks.can_be_hide
                    "
                  >
                    <button
                      class="btn btn-sm"
                      [disabled]="prevent_duplicate"
                      (click)="toggleViewSetting('networks')"
                    >
                      {{
                        iglesia.home_profile_sections?.networks.is_active
                          ? "Hide"
                          : "Show"
                      }}
                      section
                      <i
                        class="fa text-info"
                        [ngClass]="{
                          'fa-eye':
                            !iglesia.home_profile_sections?.networks.is_active,
                          'fa-eye-slash':
                            iglesia.home_profile_sections?.networks.is_active
                        }"
                      ></i>
                    </button>
                  </div>
                  <div class="spaceBetween">
                    <h5
                      *ngIf="!can_edit"
                      class="col-12"
                      [ngStyle]="{
                        'text-align':
                          grid_template_form.value?.home_title_text_align ||
                          'left',
                        color:
                          grid_template_form.value?.home_title_text_color ||
                          '#000000',
                        'font-weight':
                          grid_template_form.value?.home_title_text_bold ||
                          'bolder'
                      }"
                    >
                      {{ iglesia.col4 }}
                    </h5>
                    <mat-form-field
                      *ngIf="can_edit"
                      appearance="outline"
                      class="no-padding w-100"
                    >
                      <mat-label [ngClass]="iglesia.col4 ? '' : 'invalid'">
                      </mat-label>
                      <input
                        style="font-size: 20px"
                        class="font-weight-bold text-dark"
                        type="text"
                        [(ngModel)]="iglesia.col4"
                        matInput
                        (ngModelChange)="
                          wasEdited(); edit_object.col_4_home = true
                        "
                      />
                    </mat-form-field>
                    <div>
                      <!-- <button
                        type="button"
                        *ngIf="can_edit"
                        class="btn btn-success btn-sm"
                        (click)="toggleEditMode()"
                        [ngClass]="{ 'btn-warning': editMode }"
                      >
                        {{ editMode ? "Cancel" : "Edit" }}
                      </button> -->
                      <button
                        type="button"
                        *ngIf="edit_object.col_4_home"
                        class="btn btn-success btn-sm"
                        (click)="saveIglesia()"
                        [disabled]="!checkFields()"
                      >
                        <i class="fa fa-save"></i>
                        {{ "Save" }}
                      </button>
                    </div>
                  </div>

                  <app-networks-profile-form
                    #networks_profile
                    [idOrganization]="iglesiaId || currentUser?.idIglesia"
                    [view_mode]="can_edit ? 'edition' : 'detail'"
                    [type]="'profile'"
                  ></app-networks-profile-form>
                </div>
              </ng-template>
            </div>

            <div class="col-12">
              <div
                class="roundedDiv shadow"
                *ngIf="
                  (iglesia?.about_section_containers?.length > 0 &&
                    iglesia.home_profile_sections?.second_text_section
                      .is_active) ||
                  can_edit
                "
              >
                <ng-template [ngIf]="!loadingIglesia">
                  <div
                    class="text-right"
                    *ngIf="
                      can_edit &&
                      iglesia.home_profile_sections?.second_text_section
                        .can_be_hide
                    "
                  >
                    <button
                      class="btn btn-sm"
                      [disabled]="prevent_duplicate"
                      (click)="toggleViewSetting('second_text_section')"
                    >
                      {{
                        iglesia.home_profile_sections?.second_text_section
                          .is_active
                          ? "Hide"
                          : "Show"
                      }}
                      section
                      <i
                        class="fa text-info"
                        [ngClass]="{
                          'fa-eye':
                            !iglesia.home_profile_sections?.second_text_section
                              .is_active,
                          'fa-eye-slash':
                            iglesia.home_profile_sections?.second_text_section
                              .is_active
                        }"
                      ></i>
                    </button>
                  </div>
                  <app-profile-text-container
                    *ngFor="
                      let container of iglesia?.about_section_containers;
                      let i = index
                    "
                    [can_edit]="can_edit"
                    [loading]="loadingIglesia"
                    [idOrganization]="iglesiaId || currentUser?.idIglesia"
                    [container]="container"
                    [style_settings]="grid_template_form.value"
                    (add_button)="openButtonModal($event)"
                    (on_delete)="
                      removeProfileTextContainer(
                        $event,
                        iglesia?.about_section_containers,
                        i
                      )
                    "
                  ></app-profile-text-container>

                  <div class="row mx-0" *ngIf="can_edit">
                    <div class="col-12 text-center">
                      <hr />
                      <button
                        class="btn btn-sm btn-success col-7"
                        (click)="addTextContainer(2)"
                      >
                        <i class="fa fa-plus"> </i>
                      </button>
                      <hr />
                    </div>
                  </div>
                </ng-template>
              </div>
            </div>
          </div>
        </div>
        <div
          class="col-xs-12 align-self-start pr-0 pl-0"
          [ngClass]="{
            'col-md-12': !display_left_section,
            'col-md-8 pl-sm-3': display_left_section
          }"
          [hidden]="!(!iglesia?.free_version && display_other)"
          #news_column
          id="news_col"
          [ngStyle]="{
            top: height_second_col
          }"
        >
          <div
            [ngClass]="{
              'roundedDiv shadow': !is_complete_full_width,
              fw: is_complete_full_width,
              preview: is_complete_full_width && !show_as_preview
            }"
            class="mb-3"
            *ngIf="
              (iglesia?.main_events?.length !== 0 &&
                iglesia?.display_events_section &&
                iglesia?.home_profile_sections?.events.is_active) ||
              can_edit
            "
          >
            <ng-template
              [ngIf]="
                iglesia?.home_profile_sections?.events.is_active || can_edit
              "
            >
              <div
                class="text-right"
                *ngIf="
                  can_edit && iglesia.home_profile_sections?.events.can_be_hide
                "
              >
                <button
                  class="btn btn-sm"
                  [disabled]="prevent_duplicate"
                  (click)="toggleViewSetting('events')"
                >
                  {{
                    iglesia.home_profile_sections?.events.is_active
                      ? "Hide"
                      : "Show"
                  }}
                  section
                  <i
                    class="fa text-info"
                    [ngClass]="{
                      'fa-eye':
                        !iglesia.home_profile_sections?.events.is_active,
                      'fa-eye-slash':
                        iglesia.home_profile_sections?.events.is_active
                    }"
                  ></i>
                </button>
              </div>
              <div class="spaceBetween">
                <div class="row col-12">
                  <h5
                    *ngIf="!can_edit"
                    class="col-12"
                    [ngStyle]="{
                      'text-align':
                        grid_template_form.value?.home_title_text_align ||
                        'left',
                      color:
                        grid_template_form.value?.home_title_text_color ||
                        '#000000',
                      'font-weight':
                        grid_template_form.value?.home_title_text_bold ||
                        'bolder'
                    }"
                  >
                    {{ iglesia?.col_event }}
                  </h5>

                  <mat-form-field
                    *ngIf="can_edit"
                    appearance="outline"
                    class="no-padding col-6"
                  >
                    <mat-label [ngClass]="iglesia.col_event ? '' : 'invalid'">
                    </mat-label>
                    <input
                      style="font-size: 20px"
                      class="font-weight-bold text-dark"
                      type="text"
                      [(ngModel)]="iglesia.col_event"
                      matInput
                      (ngModelChange)="
                        wasEdited(); edit_object.event_at_home = true
                      "
                    />
                  </mat-form-field>

                  <div
                    class="col-6 align-self-center text-right"
                    *ngIf="edit_object.event_at_home"
                  >
                    <div class="btn-group mb-3">
                      <button
                        type="button"
                        *ngIf="can_edit"
                        class="btn btn-warning btn-sm"
                        (click)="
                          toggleEditMode(); edit_object.event_at_home = false
                        "
                      >
                        Cancel
                      </button>
                      <button
                        *ngIf="editMode"
                        class="btn btn-sm btn-success"
                        (click)="saveIglesia()"
                      >
                        Save
                      </button>
                    </div>
                  </div>
                </div>
                <div></div>
              </div>
              <div
                id="carouselEventsIndicators"
                class="carousel slide"
                data-ride="carousel"
                data-interval="3000"
                [hidden]="can_edit"
              >
                <div class="carousel-inner">
                  <div
                    [ngClass]="
                      i == 0 ? 'carousel-item active' : 'carousel-item'
                    "
                    *ngFor="let evento; let i = index; of: iglesia.main_events"
                  >
                    <img
                      class="d-block w-100"
                      style="height: 100%"
                      [src]="fixUrl(evento.picture)"
                      alt="First slide"
                    />
                    <div class="carousel-caption d-none d-md-block"></div>
                  </div>
                </div>
                <a
                  *ngIf="iglesia?.events?.length > 1"
                  class="carousel-control-prev"
                  href="#carouselEventsIndicators"
                  role="button"
                  data-slide="prev"
                >
                  <span
                    class="carousel-control-prev-icon"
                    aria-hidden="true"
                  ></span>
                  <span class="sr-only">Previous</span>
                </a>
                <a
                  *ngIf="iglesia?.events?.length > 1"
                  class="carousel-control-next"
                  href="#carouselEventsIndicators"
                  role="button"
                  data-slide="next"
                >
                  <span
                    class="carousel-control-next-icon"
                    aria-hidden="true"
                  ></span>
                  <span class="sr-only">Next</span>
                </a>
              </div>
            </ng-template>
          </div>
          <!-- Articles -->
          <div
            [ngClass]="{
              'roundedDiv shadow': !is_complete_full_width,
              fw: is_complete_full_width,
              preview: is_complete_full_width && !show_as_preview
            }"
            class="mb-3"
            [formGroup]="grid_template_form"
          >
            <div class="row m-0" *ngIf="can_edit">
              <div
                class="col-12 text-right"
                *ngIf="iglesia.home_profile_sections?.articles.can_be_hide"
              >
                <button
                  class="btn btn-sm"
                  [disabled]="prevent_duplicate"
                  (click)="toggleViewSetting('articles')"
                >
                  {{
                    iglesia.home_profile_sections?.articles.is_active
                      ? "Hide"
                      : "Show"
                  }}
                  section
                  <i
                    class="fa text-info"
                    [ngClass]="{
                      'fa-eye':
                        !iglesia.home_profile_sections?.articles.is_active,
                      'fa-eye-slash':
                        iglesia.home_profile_sections?.articles.is_active
                    }"
                  ></i>
                </button>
              </div>
              <form
                *ngIf="can_edit && actualPage == 1"
                style="width: 100%"
                #basicForm="ngForm"
                [formGroup]="grid_template_form"
                class="row mt-4 mx-0"
              >
                <h5 class="col-12">Style Settings</h5>

                <div class="btn-group col-12">
                  <button
                    (click)="settings_obj.submenu_option = 'view'"
                    class="btn btn-sm col-6"
                    [ngClass]="{
                      active: settings_obj.submenu_option === 'view'
                    }"
                  >
                    View
                  </button>
                  <button
                    (click)="settings_obj.submenu_option = 'text'"
                    class="btn btn-sm col-6"
                    [ngClass]="{
                      active: settings_obj.submenu_option === 'text'
                    }"
                  >
                    Text
                  </button>
                  <button
                    (click)="settings_obj.submenu_option = 'buttons'"
                    class="btn btn-sm col-6"
                    [ngClass]="{
                      active: settings_obj.submenu_option === 'buttons'
                    }"
                    [disabled]="
                      !grid_template_form.get('display_more_button').value
                    "
                  >
                    Buttons
                  </button>
                </div>
                <div class="ws-100"></div>
                <div
                  class="col-12 mt-2 m-0 row"
                  [hidden]="settings_obj.submenu_option !== 'view'"
                >
                  <h6 class="col-12 text-muted">View Settings</h6>
                  <div class="col-6">
                    <div
                      class="form-group"
                      style="display: flex; flex-direction: column"
                    >
                      <input
                        type="checkbox"
                        id="display_description"
                        name="display_description_radio"
                        class="custom-control-input"
                        formControlName="display_description"
                        [checked]="
                          grid_template_form.get('display_description').value
                        "
                        (click)="
                          toggleAcceptace(
                            grid_template_form,
                            'display_description'
                          );
                          edit_object.categories_at_home = true
                        "
                      />
                      <span
                        class="checkmark checkmark_t0"
                        (click)="
                          toggleAcceptace(
                            grid_template_form,
                            'display_description'
                          );
                          edit_object.categories_at_home = true
                        "
                      ></span>
                      <label
                        style="cursor: pointer"
                        class="custom-control-label"
                        for="display_description"
                      >
                        Display description?
                      </label>
                    </div>

                    <div
                      class="form-group"
                      style="display: flex; flex-direction: column"
                    >
                      <input
                        type="checkbox"
                        id="display_article_titles"
                        name="display_article_titles_radio"
                        class="custom-control-input"
                        formControlName="display_article_titles"
                        [checked]="
                          grid_template_form.get('display_article_titles').value
                        "
                        (click)="
                          toggleAcceptace(
                            grid_template_form,
                            'display_article_titles'
                          );
                          edit_object.categories_at_home = true
                        "
                      />
                      <span
                        class="checkmark checkmark_t0"
                        (click)="
                          toggleAcceptace(
                            grid_template_form,
                            'display_article_titles'
                          );
                          edit_object.categories_at_home = true
                        "
                      ></span>
                      <label
                        style="cursor: pointer"
                        class="custom-control-label"
                        for="display_article_titles"
                      >
                        Show articles title?
                      </label>
                    </div>
                  </div>
                  <div class="col-6">
                    <div
                      class="form-group"
                      style="display: flex; flex-direction: column"
                    >
                      <input
                        type="checkbox"
                        id="display_more_button"
                        name="display_more_button_radio"
                        class="custom-control-input"
                        formControlName="display_more_button"
                        [checked]="
                          grid_template_form.get('display_more_button').value
                        "
                        (click)="
                          toggleAcceptace(
                            grid_template_form,
                            'display_more_button'
                          );
                          edit_object.categories_at_home = true
                        "
                      />
                      <span
                        class="checkmark checkmark_t0"
                        (click)="
                          toggleAcceptace(
                            grid_template_form,
                            'display_more_button'
                          );
                          edit_object.categories_at_home = true
                        "
                      ></span>
                      <label
                        style="cursor: pointer"
                        class="custom-control-label"
                        for="display_more_button"
                      >
                        Display more button?
                      </label>
                    </div>
                  </div>

                  <div class="col-12">
                    <div
                      class="form-group"
                      style="display: flex; flex-direction: column"
                    >
                      <input
                        type="checkbox"
                        id="apply_to_all"
                        name="apply_to_all_radio"
                        class="custom-control-input"
                        formControlName="apply_to_all"
                        [checked]="grid_template_form.get('apply_to_all').value"
                        (click)="
                          toggleAcceptace(grid_template_form, 'apply_to_all');
                          edit_object.categories_at_home = true
                        "
                      />
                      <span
                        class="checkmark checkmark_t0"
                        (click)="
                          toggleAcceptace(grid_template_form, 'apply_to_all');
                          edit_object.categories_at_home = true
                        "
                      ></span>
                      <label
                        style="cursor: pointer"
                        class="custom-control-label"
                        for="apply_to_all"
                      >
                        Apply same style to other pages?
                        <br />
                        <small>
                          Will apply to the next pages: {{ pages_us_names }}
                        </small>
                      </label>
                    </div>
                  </div>
                </div>

                <div
                  class="col-12 mt-2 m-0 row"
                  [hidden]="settings_obj.submenu_option !== 'text'"
                >
                  <h6 class="col-12 text-muted">Home Title Settings</h6>
                  <div class="ws-100"></div>
                  <div class="col-1">
                    <div
                      class="form-group"
                      style="display: flex; flex-direction: column"
                    >
                      <label>Color</label>
                      <input
                        type="color"
                        formControlName="home_title_text_color"
                        class="form-control"
                        style="width: 50px; height: 40px"
                        (change)="
                          print($event); edit_object.categories_at_home = true
                        "
                      />
                      <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                    </div>
                  </div>

                  <div class="col-5">
                    <div class="form-group">
                      <label for="title_text_align" color="gray"> Align </label>
                      <select
                        class="form-control"
                        id="home_title_text_align"
                        formControlName="home_title_text_align"
                        (change)="edit_object.categories_at_home = true"
                      >
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                        <option value="justify">Justify</option>
                      </select>
                    </div>
                  </div>

                  <div class="col-5">
                    <div class="form-group">
                      <label for="home_title_text_bold" color="gray">
                        Bold
                      </label>
                      <select
                        class="form-control"
                        id="title_text_bold"
                        formControlName="home_title_text_bold"
                        (change)="edit_object.categories_at_home = true"
                      >
                        <option value="100">100</option>
                        <option value="200">200</option>
                        <option value="300">300</option>
                        <option value="400">400</option>
                        <option value="500">500</option>
                        <option value="600">600</option>
                        <option value="700">700</option>
                        <option value="800">800</option>
                        <option value="900">900</option>
                        <option value="bold">Bold</option>
                        <option value="bolder">Bolder</option>
                        <option value="lighter">Lighter</option>
                        <option value="normal">Normal</option>
                      </select>
                    </div>
                  </div>
                  <h6 [hidden]="!show_articles_title" class="col-12 text-muted">
                    Article Title Settings
                  </h6>
                  <div [hidden]="!show_articles_title" class="ws-100"></div>
                  <div [hidden]="!show_articles_title" class="col-1">
                    <div
                      class="form-group"
                      style="display: flex; flex-direction: column"
                    >
                      <label>Color</label>
                      <input
                        type="color"
                        formControlName="title_text_color"
                        class="form-control"
                        style="width: 50px; height: 40px"
                        (change)="
                          print($event); edit_object.categories_at_home = true
                        "
                      />
                      <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                    </div>
                  </div>

                  <div [hidden]="!show_articles_title" class="col-5">
                    <div class="form-group">
                      <label for="title_text_align" color="gray"> Align </label>
                      <select
                        class="form-control"
                        id="title_text_align"
                        formControlName="title_text_align"
                        (change)="edit_object.categories_at_home = true"
                      >
                        <option value="left">Left</option>
                        <option value="center">Center</option>
                        <option value="right">Right</option>
                        <option value="justify">Justify</option>
                      </select>
                    </div>
                  </div>

                  <div [hidden]="!show_articles_title" class="col-5">
                    <div class="form-group">
                      <label for="title_text_bold" color="gray"> Bold </label>
                      <select
                        class="form-control"
                        id="title_text_bold"
                        formControlName="title_text_bold"
                        (change)="edit_object.categories_at_home = true"
                      >
                        <option value="100">100</option>
                        <option value="200">200</option>
                        <option value="300">300</option>
                        <option value="400">400</option>
                        <option value="500">500</option>
                        <option value="600">600</option>
                        <option value="700">700</option>
                        <option value="800">800</option>
                        <option value="900">900</option>
                        <option value="bold">Bold</option>
                        <option value="bolder">Bolder</option>
                        <option value="lighter">Lighter</option>
                        <option value="normal">Normal</option>
                      </select>
                    </div>
                  </div>

                  <!--  -->

                  <div
                    class="ws-100"
                    [hidden]="!show_display_description"
                  ></div>
                  <h5
                    class="col-12 text-muted"
                    [hidden]="!show_display_description"
                  >
                    Article Text Settings
                  </h5>
                  <div
                    class="ws-100"
                    [hidden]="!show_display_description"
                  ></div>

                  <div class="col-3" [hidden]="!show_display_description">
                    <div
                      class="form-group"
                      style="display: flex; flex-direction: column"
                    >
                      <label>Description Text Color</label>
                      <input
                        type="color"
                        formControlName="description_text_color"
                        class="form-control"
                        style="width: 50px; height: 40px"
                        (change)="
                          print($event); edit_object.categories_at_home = true
                        "
                      />
                      <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                    </div>
                  </div>
                </div>

                <div
                  class="col-12 mt-2 m-0 row"
                  [hidden]="settings_obj.submenu_option !== 'buttons'"
                >
                  <!--  -->
                  <h6 class="col-12 text-muted">Square Settings</h6>
                  <div class="ws-100"></div>
                  <div class="col-6">
                    <div
                      class="form-group"
                      style="display: flex; flex-direction: column"
                    >
                      <label for="button_border_radius_range" color="gray">
                        Button Border Radius
                        {{
                          grid_template_form.get("button_border_radius").value
                        }}%
                      </label>
                      <input
                        type="range"
                        class="custom-range"
                        min="0"
                        max="50"
                        step="1"
                        id="button_border_radius_range"
                        formControlName="button_border_radius"
                        (change)="edit_object.categories_at_home = true"
                      />
                    </div>
                  </div>

                  <div class="col-6">
                    <div
                      class="form-group"
                      style="display: flex; flex-direction: column"
                    >
                      <label for="button_spacing_range" color="gray">
                        Button Spacing
                        {{ grid_template_form.get("button_spacing").value }}
                      </label>
                      <input
                        type="range"
                        class="custom-range"
                        min="0"
                        max="20"
                        step="0.25"
                        id="button_spacing_range"
                        formControlName="button_spacing"
                        (change)="edit_object.categories_at_home = true"
                      />
                    </div>
                  </div>

                  <div class="ws-100"></div>
                  <h5 class="col-12 text-muted">Shadow Settings</h5>
                  <div class="ws-100"></div>
                  <div class="col-1">
                    <div
                      class="form-group"
                      style="display: flex; flex-direction: column"
                    >
                      <label>Color</label>
                      <input
                        type="color"
                        formControlName="shadow_color"
                        class="form-control"
                        style="width: 50px; height: 40px"
                        (change)="
                          print($event); edit_object.categories_at_home = true
                        "
                      />
                      <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                    </div>
                  </div>

                  <div class="col-5">
                    <div
                      class="form-group"
                      style="display: flex; flex-direction: column"
                    >
                      <label for="shadow_spread_range" color="gray">
                        Spread
                        {{ grid_template_form.get("shadow_spread").value }}
                      </label>
                      <input
                        type="range"
                        class="custom-range"
                        min="0"
                        max="1"
                        step="0.05"
                        id="shadow_spread_range"
                        formControlName="shadow_spread"
                        (change)="edit_object.categories_at_home = true"
                      />
                    </div>
                  </div>

                  <div class="col-5">
                    <div
                      class="form-group"
                      style="display: flex; flex-direction: column"
                    >
                      <label for="shadow_blur_range" color="gray">
                        Blur
                        {{ grid_template_form.get("shadow_blur").value }}
                      </label>
                      <input
                        type="range"
                        class="custom-range"
                        min="0"
                        max="3"
                        step="0.05"
                        id="shadow_blur_range"
                        formControlName="shadow_blur"
                        (change)="edit_object.categories_at_home = true"
                      />
                    </div>
                  </div>
                  <div
                    class="ws-100"
                    [hidden]="!show_display_more_button"
                  ></div>
                  <h5
                    class="col-12 text-muted"
                    [hidden]="!show_display_more_button"
                  >
                    Button Settings
                  </h5>
                  <div
                    class="ws-100"
                    [hidden]="!show_display_more_button"
                  ></div>
                  <div class="col-3" [hidden]="!show_display_more_button">
                    <div
                      class="form-group"
                      style="display: flex; flex-direction: column"
                    >
                      <label>Button Text Color</label>
                      <input
                        type="color"
                        formControlName="button_more_color"
                        class="form-control"
                        style="width: 50px; height: 40px"
                        (change)="
                          print($event); edit_object.categories_at_home = true
                        "
                      />
                      <!-- [(ngModel)]="communityStyleSettings.button_color" -->
                    </div>
                  </div>
                </div>
              </form>

              <div class="col-5 align-self-center">
                <div class="form-group form-check mb-0">
                  <input
                    formControlName="display_horizontal_on_main"
                    (change)="setSize(); edit_object.categories_at_home = true"
                    type="checkbox"
                    class="form-check-input"
                    id="shadow_check"
                  />
                  <label class="form-check-label" for="shadow_check">
                    Horizontal scroll?
                  </label>
                </div>
                <small class="text-secondary mb-3">
                  (Only works for app)
                </small>
              </div>
              <div class="col-5 align-self-center">
                <button
                  class="btn btn-sm btn-success"
                  (click)="showCategories(manage_categories_modal)"
                >
                  Manage categories
                </button>
              </div>

              <div
                class="col-12 align-self-center text-right"
                *ngIf="edit_object.categories_at_home"
              >
                <div class="btn-group">
                  <button
                    type="button"
                    class="btn btn-warning btn-sm"
                    (click)="
                      toggleEditMode(); edit_object.categories_at_home = false
                    "
                  >
                    Cancel
                  </button>
                  <button
                    class="btn btn-sm btn-success"
                    (click)="saveIglesia()"
                  >
                    Save
                  </button>
                </div>
              </div>
            </div>
            <div
              class="row mx-0"
              *ngIf="can_edit"
              formArrayName="categories_to_display_form"
              cdkDropList
              cdkDropListOrientation="vertical"
              [ngClass]="can_edit ? 'category-drag-list' : ''"
              (cdkDropListDropped)="
                sortCategoriesArray(categories_to_display_form.controls, $event)
              "
            >
              <div
                [formGroupName]="i"
                class="col-12 row m-0"
                *ngFor="
                  let item of categories_to_display_form.controls;
                  let i = index;
                  let last_ = last;
                  let f = first
                "
                cdkDrag
                [cdkDragDisabled]="
                  !can_edit ||
                  (last_ &&
                    !categories_to_display_form.at(i).get('idCategoryArticle')
                      .value)
                "
                [cdkDragLockAxis]="'y'"
                [ngClass]="{
                  'category-drag-box': can_edit
                }"
              >
                <label
                  class="col-6 hide-control"
                  *ngIf="i === 0"
                  for="idOrganization"
                >
                  <h5>Categories to show</h5>
                </label>
                <label
                  class="col-6 hide-control"
                  *ngIf="i === 0"
                  for="idOrganization"
                >
                  <h5>Items per row</h5>
                </label>
                <div class="col-md-6 col-12 align-self-start">
                  <div
                    class="form-group"
                    style="display: flex; flex-direction: column"
                  >
                    <select
                      required
                      class="hide-control form-control"
                      formControlName="idCategoryArticle"
                      (ngModelChange)="setViewType(item, true, true)"
                    >
                      <option *ngIf="!iglesia.col6_grid" value="0"></option>
                      <option
                        *ngFor="
                          let category of categories_left(
                            categories_to_display_form
                              .at(i)
                              .get('idCategoryArticle').value
                          )
                        "
                        [value]="category.idCategoriaArticulo"
                      >
                        {{ category.nombre | translate }}
                      </option>
                    </select>

                    <span class="name-span" style="display: none">
                      {{
                        getCategory(
                          categories_to_display_form
                            .at(i)
                            .get("idCategoryArticle").value,
                          true
                        )?.nombre || "None" | translate
                      }}
                    </span>
                    <small
                      *ngIf="
                        categories_to_display_form.at(i).get('col_size')
                          .value != '12'
                      "
                    >
                      {{ categories_to_display_form.at(i).get("rows").value }}
                      rows to show
                    </small>
                  </div>
                </div>
                <div class="col-6 col-md-3 align-self-center">
                  <div
                    class="form-group"
                    style="display: flex; flex-direction: column"
                    [ngClass]="{
                      'mb-0': categories_to_display_form
                        .at(i)
                        .get('display_view_as').value
                    }"
                  >
                    <select
                      required
                      formControlName="col_size"
                      class="form-control w-100"
                      (change)="setViewType(item, true)"
                    >
                      <option value="12">1 per row</option>
                      <option value="6">2 per row</option>
                      <option value="4">3 per row</option>
                      <option value="3">4 per row</option>
                    </select>
                  </div>
                  <div
                    *ngIf="
                      categories_to_display_form.at(i).get('display_view_as')
                        .value
                    "
                    class="form-group"
                    style="display: flex; flex-direction: column"
                  >
                    <label>
                      <small> View as </small>
                    </label>
                    <select
                      required
                      formControlName="view_as"
                      class="form-control w-100"
                      (change)="
                        setSize(); edit_object.categories_at_home = true
                      "
                    >
                      <option value="load_more">Load more</option>
                      <option value="carousel">Carousel</option>
                    </select>
                  </div>
                </div>
                <div class="col-6 col-md-3 text-right align-self-start">
                  <div
                    class="btn-group mr-2"
                    *ngIf="
                      last_ &&
                      categories_left(
                        categories_to_display_form
                          .at(i)
                          .get('idCategoryArticle').value
                      ).length > 1 &&
                      categories_to_display_form.at(i).get('idCategoryArticle')
                        .value
                    "
                  >
                    <button
                      (click)="
                        addCategoryToMain();
                        edit_object.categories_at_home = true
                      "
                      class="btn btn-sm btn-success"
                    >
                      <i class="fa fa-plus"> </i>
                    </button>
                  </div>
                  <div class="btn-group mr-2">
                    <!-- [ngClass]="{ 'mr-custom': f || last_ }" -->
                    <button
                      (click)="openArticleForm(item, i)"
                      class="btn btn-sm btn-info"
                      [disabled]="item.get('idCategoryArticle').invalid"
                      *ngIf="
                        getCategory(item.value.idCategoryArticle)
                          ?.articles_count === 0
                      "
                    >
                      <i class="fa fa-plus"> </i>
                    </button>
                    <button
                      (click)="
                        removeCategory(i); edit_object.categories_at_home = true
                      "
                      class="btn btn-sm btn-danger"
                    >
                      <i class="fa fa-trash"> </i>
                    </button>
                  </div>
                  <div
                    class="btn-group"
                    *ngIf="categories_to_display_form.length > 0"
                  >
                    <!-- <button
                      *ngIf="
                        !f &&
                        categories_to_display_form
                          .at(i)
                          .get('idCategoryArticle').value
                      "
                      class="btn btn-sm"
                      (click)="
                        onSortItem(
                          categories_to_display_form.controls,
                          item,
                          'up'
                        )
                      "
                    >
                      <i class="fa fa-arrow-up"></i>
                    </button>
                    <button
                      *ngIf="
                        !last_ &&
                        categories_to_display_form
                          .at(i)
                          .get('idCategoryArticle').value
                      "
                      class="btn btn-sm"
                      (click)="
                        onSortItem(
                          categories_to_display_form.controls,
                          item,
                          'down'
                        )
                      "
                    >
                      <i class="fa fa-arrow-down"></i>
                    </button> -->
                    <div
                      *ngIf="can_edit"
                      class="example-handle"
                      cdkDragHandle
                      [ngClass]="{
                        disabled:
                          last_ &&
                          !categories_to_display_form
                            .at(i)
                            .get('idCategoryArticle').value
                      }"
                    >
                      <svg width="24px" fill="currentColor" viewBox="0 0 24 24">
                        <path
                          d="M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"
                        ></path>
                        <path d="M0 0h24v24H0z" fill="none"></path>
                      </svg>
                    </div>
                  </div>
                </div>
                <!-- <div
                  class="col-md-3 col-2 text-center align-self-center"
                  *ngIf="
                    last_ &&
                    categories_left(
                      categories_to_display_form.at(i).get('idCategoryArticle')
                        .value
                    ).length > 1 &&
                    categories_to_display_form.at(i).get('idCategoryArticle')
                      .value
                  "
                >
                  <button
                    (click)="addCategoryToMain()"
                    class="btn btn-sm btn-success"
                  >
                    <i class="fa fa-plus"> </i>
                  </button>
                </div> -->
              </div>
            </div>
            <div
              [ngClass]="{
                'p-0 p-md-3 col-md-11': is_complete_full_width
              }"
              class="col-12"
              *ngIf="
                selected_category_on_main.length > 0 &&
                iglesia.home_profile_sections?.articles.is_active
              "
            >
              <app-profile-articles-display
                [hidden]="category.articles_count === 0 && !can_edit"
                *ngFor="let category of selected_category_on_main"
                class="articles-display col-12"
                #main_articles_display
                [is_main_page]="true"
                [show_category_name]="selected_category_on_main.length > 0"
                [grid_info_settings]="grid_template_form.value"
                [idOrganization]="iglesiaId"
                [view_mode]="can_edit ? 'edition' : 'detail'"
                [categories]="[category]"
                (onAddArticle)="addArticle($event, main_articles_display)"
                (onEditArticle)="editArticle($event, main_articles_display)"
                [left_section_is_hide]="!iglesia?.display_left_section"
              >
              </app-profile-articles-display>
            </div>
          </div>
        </div>
      </div>

      <div
        class="row mt-3 text-center"
        *ngIf="!loadingIglesia"
        [ngStyle]="{ display: actualPage == 3 ? '' : 'none' }"
      >
        <div
          class="col-12 row"
          *ngIf="
            can_edit && actual_tab_control.get('settings') && actualPage == 3
          "
        >
          <h5 class="col-12 text-muted">Header Settings</h5>
          <div class="ws-100"></div>
          <div
            [formGroup]="actual_tab_control.get('settings')"
            class="col-12 row m-0"
          >
            <div class="col-2">
              <div class="form-group form-check mb-2">
                <input
                  formControlName="show_v2"
                  (change)="setSize()"
                  type="checkbox"
                  class="form-check-input"
                  id="show_v2"
                />
                <label class="form-check-label" for="show_v2"> Show V2 </label>
              </div>
              <label
                [hidden]="
                  actual_tab_control.get('settings')?.get('show_v2').value
                "
              >
                Default view:
              </label>
              <select
                [hidden]="
                  actual_tab_control.get('settings')?.get('show_v2').value
                "
                class="form-control"
                formControlName="default_view"
              >
                <option value="list">List</option>
                <option value="calendar">Calendar</option>
              </select>
            </div>
            <div
              class="col-2 col-md-1"
              [hidden]="
                actual_tab_control.get('settings')?.get('default_view').value !=
                  'calendar' ||
                actual_tab_control.get('settings')?.get('show_v2').value
              "
            >
              <div
                class="form-group align-items-center"
                style="display: flex; flex-direction: column"
              >
                <label>
                  <span class="tooltip_">
                    <span class="tooltiptext"> Header color </span>
                    <small> Header </small>
                    <i class="text-secondary fa fa-info-circle"></i>
                  </span>
                </label>
                <input
                  type="color"
                  formControlName="calendar_header_background"
                  (ngModelChange)="wasEdited()"
                  class="form-control"
                  style="width: 50px; height: 40px"
                />
                <!-- [(ngModel)]="communityStyleSettings.button_color" -->
              </div>
            </div>
            <div
              class="col-2 col-md-2"
              [hidden]="
                actual_tab_control.get('settings')?.get('default_view').value !=
                  'calendar' ||
                actual_tab_control.get('settings')?.get('show_v2').value
              "
            >
              <div
                class="form-group align-items-center"
                style="display: flex; flex-direction: column"
              >
                <label>
                  <span class="tooltip_">
                    <span class="tooltiptext"> Subheader color </span>
                    <small> Subheader </small>
                    <i class="text-secondary fa fa-info-circle"></i>
                  </span>
                </label>
                <input
                  type="color"
                  formControlName="calendar_subheader_background"
                  (ngModelChange)="wasEdited()"
                  class="form-control"
                  style="width: 50px; height: 40px"
                />
                <!-- [(ngModel)]="communityStyleSettings.button_color" -->
              </div>
            </div>
            <div
              class="col-2 col-md-1"
              [hidden]="
                actual_tab_control.get('settings')?.get('default_view').value !=
                  'calendar' ||
                actual_tab_control.get('settings')?.get('show_v2').value
              "
            >
              <div
                class="form-group align-items-center"
                style="display: flex; flex-direction: column"
              >
                <label>
                  <span class="tooltip_">
                    <span class="tooltiptext">
                      Subheader color when the pointer is over the subheader
                      cell.
                    </span>
                    <small> Hover </small>
                    <i class="text-secondary fa fa-info-circle"></i>
                  </span>
                </label>
                <input
                  type="color"
                  formControlName="calendar_subheader_hover"
                  (ngModelChange)="wasEdited()"
                  class="form-control"
                  style="width: 50px; height: 40px"
                />
                <!-- [(ngModel)]="communityStyleSettings.button_color" -->
              </div>
            </div>
            <div
              class="col-2 col-md-1"
              [hidden]="
                actual_tab_control.get('settings')?.get('default_view').value !=
                  'calendar' ||
                actual_tab_control.get('settings')?.get('show_v2').value
              "
            >
              <div
                class="form-group align-items-center"
                style="display: flex; flex-direction: column"
              >
                <label>
                  <span class="tooltip_">
                    <span class="tooltiptext"> Text Color </span>
                    <small> Text </small>
                    <i class="text-secondary fa fa-info-circle"></i>
                  </span>
                </label>
                <input
                  type="color"
                  formControlName="text_color"
                  (ngModelChange)="wasEdited()"
                  class="form-control"
                  style="width: 50px; height: 40px"
                />
                <!-- [(ngModel)]="communityStyleSettings.button_color" -->
              </div>
            </div>

            <div
              class="col-3 align-self-center text-left"
              [hidden]="
                actual_tab_control.get('settings')?.get('default_view').value !=
                  'calendar' ||
                actual_tab_control.get('settings')?.get('show_v2').value
              "
            >
              <div class="form-group form-check mb-2">
                <input
                  formControlName="show_attendances"
                  (change)="setSize()"
                  type="checkbox"
                  class="form-check-input"
                  id="is_visible"
                />
                <label class="form-check-label" for="is_visible">
                  Show attendances
                </label>
              </div>
              <div class="form-group form-check mb-0">
                <input
                  formControlName="show_capacity"
                  (change)="setSize()"
                  type="checkbox"
                  class="form-check-input"
                  id="is_visible"
                />
                <label class="form-check-label" for="is_visible">
                  Show capacity
                </label>
              </div>
            </div>

            <div class="col-12" *ngIf="actual_tab_control.get('settings')?.get('show_v2').value">
              <div class="row">
                <div class="col-12">
                  <h4 class="text-secondary text-left">
                    Version 2 settings
                  </h4>
                </div>
                <div class="col-12 col-md-3 align-self-center text-left">
                  <div class="form-group form-check mb-2 ml-5">
                    <input
                      formControlName="use_own_text"
                      (change)="setSize()"
                      type="checkbox"
                      class="form-check-input"
                      id="use_own_text"
                    />
                    <label class="form-check-label" for="use_own_text"> Use my own text</label>
                  </div>
                </div>
                <div class="col-12 col-md-3" *ngIf="actual_tab_control.get('settings')?.get('use_own_text').value">
                  <div class="form-group">
                  <label for="events_text">
                    Events
                  </label>
                  <input type="text" id="events_text" formControlName="events_text_header" class="form-control">
                  </div>
                </div>
                <div class="col-12 col-md-3" *ngIf="actual_tab_control.get('settings')?.get('use_own_text').value">
                  <div class="form-group">
                  <label for="our_meetings_text">
                    Our meetings
                  </label>
                  <input type="text" id="our_meetings_text" formControlName="our_meetings_text" class="form-control">
                  </div>
                </div>
                <div class="col-12 col-md-3" *ngIf="actual_tab_control.get('settings')?.get('use_own_text').value">
                  <div class="form-group">
                  <label for="view_more_text">
                   View more <small>(This will be shown in uppercase)</small>
                  </label>
                  <input type="text" id="view_more_text" formControlName="view_more_text" class="form-control">
                  </div>
                </div>
              </div>
            </div>
            <div
              [ngClass]="{
                'offset-8':
                  actual_tab_control.get('settings')?.get('default_view')
                    .value != 'calendar'
              }"
              class="col-2 align-self-center"
            >
              <button
                type="button"
                class="btn btn-success btn-sm"
                (click)="saveIglesia()"
              >
                <i class="fa fa-save"></i>
              </button>
            </div>
          </div>
        </div>

        <app-event-calendar
          class="col-12"
          *ngIf="
            !selectedEvent &&
            !loadingIglesia &&
            iglesia.events &&
            !actual_tab_control.get('settings')?.get('show_v2')?.value
          "
          [hidden]="selectedEvent || loadingIglesia"
          [show_options]="false"
          [idOrganization]="iglesiaId || currentUser?.idIglesia"
          (make_refresh)="getEventsForCalendar()"
          [show_view_type]="true"
          [view_type]="
            actual_tab_control.get('settings')?.get('default_view')?.value &&
            actualPage == 3
          "
          [event_template_settings]="actual_tab_control.get('settings')?.value"
        >
        </app-event-calendar>
        <app-event-calendar-v2
          class="col-12"
          *ngIf="
            !selectedEvent &&
            !loadingIglesia &&
            actual_tab_control.get('settings')?.get('show_v2')?.value &&
            actualPage == 3
          "
          [hidden]="selectedEvent || loadingIglesia"
          [show_options]="false"
          [idOrganization]="iglesiaId || currentUser?.idIglesia"
          (make_refresh)="getEventsForCalendar()"
          [show_view_type]="true"
          [view_type]="
            actual_tab_control.get('settings')?.get('default_view').value
          "
          [event_template_settings]="actual_tab_control.get('settings')?.value"
          [style_settings]="grid_template_form.value"
        >
        </app-event-calendar-v2>
        <!-- <app-view-event-activities
        [hidden]="!selectedEvent || hide_activities"
        #view_event_activities_form
        (onDismiss)="closeViews()"
      >
      </app-view-event-activities>
      <app-view-event-reviews
        [hidden]="!selectedEvent || hide_reviews"
        #view_event_reviews_form
        (onDismiss)="closeViews()"
      >
      </app-view-event-reviews>

      <app-view-event-finances
        [hidden]="!selectedEvent || hide_finances"
        #view_event_finances_form
        (onDismiss)="closeViews()"
      >
      </app-view-event-finances>

      <app-view-event-attendance
        [hidden]="!selectedEvent || hide_attendance"
        #view_event_attendances_form
        (onDismiss)="closeViews($event)"
      >
      </app-view-event-attendance> -->
      </div>

      <!-- Nosotros | Us -->
      <div
        class="row mt-3 text-center"
        [ngStyle]="{ display: actualPage == 10 ? '' : 'none' }"
      >
        <div class="col-12" *ngIf="header_items_form.length > 0">
          <ng-template [ngIf]="true">
            <div class="property-box-list">
              <ng-container>
                <div class="row">
                  <!-- For -->
                  <app-profile-articles-display
                    #only_category_articles_display
                    *ngIf="
                      actual_tab_control.get('item_id').value && custom_category
                    "
                    class="col-12"
                    [is_main_page]="false"
                    [grid_info_settings]="grid_template_form.value"
                    [idOrganization]="iglesiaId || currentUser?.idIglesia"
                    [view_mode]="can_edit ? 'edition' : 'detail'"
                    [categories]="[custom_category]"
                    (onAddArticle)="
                      addArticle($event, only_category_articles_display)
                    "
                    (onEditArticle)="
                      editArticle($event, only_category_articles_display)
                    "
                  >
                  </app-profile-articles-display>
                </div>
              </ng-container>
              <!-- AQUI COMIENZA -->
              <!-- If edit mode -->
            </div>
          </ng-template>
        </div>
      </div>

      <div
        class="row mt-3"
        [ngStyle]="{
          display: actual_page_as_string == 'account' ? '' : 'none'
        }"
      >
        <div class="col-12">
          <div class="roundedDiv mb-3 shadow">
            <app-standalone-account-login
              *ngIf="!currentUser"
              [idOrganization]="iglesiaId || currentUser?.idIglesia"
              [handle_as_template]="true"
              (on_login_success)="setUser($event)"
            ></app-standalone-account-login>

            <app-account-profile
              *ngIf="currentUser"
              [memberId]="currentUser.idUsuario"
              [idOrganization]="iglesiaId || currentUser?.idIglesia"
            >
            </app-account-profile>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="idArticle">
      <app-article
        (dismiss)="dismissAndRedirect($event)"
        #page_articulo
        [skip_id_as_param]="true"
        [id]="idArticle"
        [iglesia]="iglesia_full_data"
      ></app-article>
    </div>
    <div *ngIf="mailing_list">
      <ng-template [ngIf]="ci_display_standalone.loading">
        <div
          class="d-flex justify-content-center col-12"
          style="margin-top: 10%; margin-bottom: 10%"
        >
          <div
            style="
              height: 120px;
              width: 120px;
              font-size: 15px;
              border-width: 0.45em;
            "
            class="spinner-border text-citric"
            role="status"
          ></div>
        </div>
      </ng-template>

      <div
        class="roundedDiv mx-0 text-center shadow row justify-content-center mt-4"
      >
        <div class="col-12 row justify-content-end">
          <div class="col-2 text-center my-4">
            <button
              (click)="dismissAndRedirect(mailing_list.idCategoryArticle)"
              class="btn btn-sm btn-outline-citric col-11"
            >
              Close <i style="font-size: 15px" class="fa fa-times"></i>
            </button>
          </div>
        </div>
        <app-profile-contact-inbox-display
          #ci_display_standalone
          (loading_finished)="ci_display_standalone.loading = false"
          style="display: block"
          class="col-11"
          [idOrganization]="iglesiaId || currentUser?.idIglesia"
          [view_mode]="can_edit ? 'edition' : 'detail'"
          [contact_inboxes]="[mailing_list]"
          [style_settings]="grid_template_form.value"
        >
        </app-profile-contact-inbox-display>
      </div>
    </div>

    <div class="row mt-3 mx-0" *ngIf="canToggle()">
      <div class="col-12 text-right px-0">
        <button class="btn btn-sm btn-success" (click)="togglePreview()">
          {{ show_as_preview ? "Preview" : "Edit" }}
        </button>
      </div>
    </div>
  </div>
  <div
    *ngIf="can_edit && iglesia.home_profile_sections?.footer.can_be_hide"
    class="row justify-content-end mx-0"
    [ngStyle]="{
      'background-color': iglesia?.header_menu_settings.background_color,
      color: iglesia?.header_menu_settings.text_color
    }"
  >
    <button
      class="btn btn-sm"
      [disabled]="prevent_duplicate"
      (click)="toggleViewSetting('footer')"
    >
      {{ iglesia.home_profile_sections?.footer.is_active ? "Hide" : "Show" }}
      footer
      <i
        class="fa"
        [ngClass]="{
          'fa-eye': !iglesia.home_profile_sections?.footer.is_active,
          'fa-eye-slash': iglesia.home_profile_sections?.footer.is_active
        }"
      ></i>
    </button>
  </div>
  <app-footer-section
    *ngIf="
      iglesia.home_profile_sections?.footer.is_active &&
      iglesia.home_profile_sections?.footer.can_be_hide
    "
    [style_settings]="iglesia?.header_menu_settings"
    [can_edit]="can_edit"
    [idOrganization]="iglesiaId || currentUser?.idIglesia"
    (on_click)="footerClick($event)"
    (on_submit)="footerSave($event)"
  ></app-footer-section>
</div>

<div
  *ngIf="estatus_identificador"
  class="row vertical-center-row m-0 justify-content-center"
  style="width: 100%"
>
  <div class="container page pt-0">
    <div class="row vertical-center-row m-0">
      <div class="col-12 text-center">
        <div class="row justify-content-center">
          <div style="height: 130px" class="col-5 col-md-2 align-self-baseline">
            <img
              style="width: 100%"
              src="/assets/img/logoColor.png"
              alt="Iglesia Tech"
            />
          </div>
        </div>
        <div class="row justify-content-center">
          <div class="col-10 col-md-7">
            <h1
              class="disclaimer-text text-muted"
              style="font-weight: bold"
              [innerHTML]="estatus_identificador.traduccionKey | translate"
            ></h1>
          </div>
          <div *ngIf="!estatus_identificador.canClose" class="col-10 col-md-7">
            <div class="mt-2">
              <h2 style="font-weight: bold" class="contact-mail">
                <a [href]="'mailto:info@iglesiatech.com'">
                  info@iglesiatech.com
                </a>
              </h2>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template [ngIf]="is_loading">
  <div
    class="d-flex justify-content-center col-12"
    style="margin-top: 10%; margin-bottom: 10%"
  >
    <div
      style="height: 120px; width: 120px; font-size: 15px; border-width: 0.45em"
      class="spinner-border text-citric"
      role="status"
    ></div>
  </div>
</ng-template>

<ngx-smart-modal
  #editArticleProfileModal
  identifier="editArticleProfileModal"
  [dismissable]="false"
  customClass="large-modal"
  (onAnyCloseEvent)="selectedArticle = undefined"
  (onOpenFinished)="loadMediaTypes(article_form_profile)"
>
  <h4>Edit article</h4>
  <ng-template [ngIf]="selectedArticle">
    <article-form
      #article_form_profile
      [came_from_profile]="true"
      [article]="selectedArticle"
      [style_settings]="iglesia?.header_menu_settings"
      (submit)="handleSubmitArticle()"
    ></article-form>
  </ng-template>
</ngx-smart-modal>

<ngx-smart-modal
  #manage_categories_modal
  identifier="manage_categories_modal"
  [dismissable]="false"
  customClass="large-modal"
>
  <ng-template [ngIf]="show_categories">
    <app-article-categories-home
      [idOrganization]="iglesiaId || currentUser?.idIglesia"
      [display_as_modal]="true"
      (make_refresh)="getArticleCategories(iglesiaId || currentUser.idIglesia)"
    >
    </app-article-categories-home>
  </ng-template>
</ngx-smart-modal>

<ngx-smart-modal
  #category_style_modal
  identifier="category_style_modal"
  [dismissable]="false"
  customClass="large-modal"
  (onAnyCloseEvent)="actual_style_settings = undefined"
>
  <ng-template [ngIf]="actual_style_settings">
    <form [formGroup]="actual_style_settings">
      <div class="row justify-content-center">
        <div
          class="col-md-3"
          [ngStyle]="{
            'font-size': actual_style_settings.value.font_size || '14px'
          }"
        >
          <div
            style="height: 100%; align-items: center"
            class="roundedDiv mb-3 shadow row mx-0"
            (mouseover)="actual_style_settings.get('is_hover').setValue(true)"
            (mouseleave)="actual_style_settings.get('is_hover').setValue(false)"
            [ngStyle]="{
              'background-color':
                actual_style_settings.value.background_color || '#ffffff',

              'background-color': actual_style_settings.value.is_active
                ? actual_style_settings.value.active_background_color ||
                  '#e4e4e4'
                : actual_style_settings.value.is_hover
                ? actual_style_settings.value.hover_background_color ||
                  '#dddddd'
                : actual_style_settings.value.background_color || '#ffffff',
              color: actual_style_settings.value.font_color || '#000000',
              'font-style': actual_style_settings.value.font_style || 'unset',
              'font-size': actual_style_settings.value.font_size || '14px',
              'font-weight':
                actual_style_settings.value.font_weight || 'normal',
              'text-align': actual_style_settings.value.text_align || 'center'
            }"
          >
            <div class="col-12">
              {{ actual_style_settings.value.name }}
            </div>
          </div>
        </div>
      </div>
      <div class="row m-0">
        <div class="col-5 col-md-2">
          <div class="form-group">
            <label>Background color </label>
            <input
              type="color"
              required
              class="form-control mb-1"
              placeholder="Enter your tab's name."
              formControlName="background_color"
              [class.is-invalid]="
                actual_style_settings.get('background_color').dirty &&
                actual_style_settings.get('background_color').invalid
              "
              (ngModelChange)="wasEdited()"
            />
          </div>
          <div class="form-group">
            <label>Hover background </label>
            <input
              type="color"
              required
              class="form-control mb-1"
              placeholder="Enter your tab's name."
              formControlName="hover_background_color"
              [class.is-invalid]="
                actual_style_settings.get('hover_background_color').dirty &&
                actual_style_settings.get('hover_background_color').invalid
              "
              (ngModelChange)="wasEdited()"
            />
          </div>
          <div class="form-group">
            <label>Active color </label>
            <input
              type="color"
              required
              class="form-control mb-1"
              placeholder="Enter your tab's name."
              formControlName="active_background_color"
              [class.is-invalid]="
                actual_style_settings.get('active_background_color').dirty &&
                actual_style_settings.get('active_background_color').invalid
              "
              (ngModelChange)="wasEdited()"
            />
          </div>
          <div class="form-group">
            <label>Font color </label>
            <input
              type="color"
              required
              class="form-control mb-1"
              placeholder="Enter your tab's name."
              formControlName="font_color"
              [class.is-invalid]="
                actual_style_settings.get('font_color').dirty &&
                actual_style_settings.get('font_color').invalid
              "
              (ngModelChange)="wasEdited()"
            />
          </div>
        </div>
        <div class="col-7 col-md-4">
          <div class="form-group">
            <label>Font style </label>
            <select
              required
              class="form-control mb-1"
              placeholder="Enter your tab's name."
              formControlName="font_style"
              [class.is-invalid]="
                actual_style_settings.get('font_style').dirty &&
                actual_style_settings.get('font_style').invalid
              "
              (ngModelChange)="wasEdited()"
            >
              <option value="unset">Normal</option>
              <option value="italic">Italic</option>
            </select>
          </div>

          <div class="form-group">
            <label for="text_align" color="gray"> Text Align </label>
            <select
              class="form-control"
              id="text_align"
              formControlName="text_align"
            >
              <option value="center">Center</option>
              <option value="justify">Justify</option>
              <option value="left">Left</option>
              <option value="right">Right</option>
            </select>
          </div>

          <div class="form-group form-check">
            <input
              class="form-check-input"
              id="is_active"
              formControlName="is_active"
              type="checkbox"
            />
            <label class="form-check-label" for="is_visible" color="gray">
              Show active style
            </label>
          </div>
        </div>
        <div class="col-12 col-md-4">
          <div class="row">
            <div class="col-12">
              <div class="form-group">
                <label for="font_weight" color="gray"> Font Weight </label>
                <select
                  class="form-control"
                  id="font_weight"
                  formControlName="font_weight"
                >
                  <option value="100">100</option>
                  <option value="200">200</option>
                  <option value="300">300</option>
                  <option value="400">400</option>
                  <option value="500">500</option>
                  <option value="600">600</option>
                  <option value="700">700</option>
                  <option value="800">800</option>
                  <option value="900">900</option>
                  <option value="bold">Bold</option>
                  <option value="bolder">Bolder</option>
                  <option value="lighter">Lighter</option>
                  <option value="normal">Normal</option>
                </select>
              </div>
            </div>
            <div class="col-6 align-self-end">
              <div class="form-group">
                <label for="marital">
                  Size ({{ settings_obj.text_size_size
                  }}{{ settings_obj.text_size_unit }})
                </label>
                <input
                  *ngIf="settings_obj.text_size_unit !== '%'"
                  type="range"
                  class="custom-range"
                  min="1"
                  max="40"
                  step="1"
                  id="button_border_radius_range"
                  (change)="updateForm('text')"
                  [(ngModel)]="settings_obj.text_size_size"
                  [ngModelOptions]="{ standalone: true }"
                />

                <input
                  *ngIf="settings_obj.text_size_unit === '%'"
                  type="range"
                  class="custom-range"
                  min="1"
                  max="100"
                  step="1"
                  id="button_border_radius_range"
                  (change)="updateForm('text')"
                  [(ngModel)]="settings_obj.text_size_size"
                  [ngModelOptions]="{ standalone: true }"
                />
              </div>
            </div>
            <div class="col-6 align-self-end">
              <div class="form-group">
                <!-- <label for="marital">Unit</label> -->
                <select
                  (change)="updateForm('text')"
                  [(ngModel)]="settings_obj.text_size_unit"
                  [ngModelOptions]="{ standalone: true }"
                  class="form-control mb-1"
                >
                  <option value="px">Pixels</option>
                  <option value="%">Percent</option>
                  <!-- <option value="em">Em</option> -->
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="col-12" *ngIf="actual_style_settings.value.is_group">
          <div class="row">
            <div class="col-12">
              <h5 class="m-0 text-left text-muted">
                Group Type Style Settings
              </h5>
              <small>
                These style options are only available for groups module.
              </small>
            </div>
          </div>

          <div class="col-2">
            <div class="form-group form-check">
              <input
                formControlName="show_shadow"
                (ngModelChange)="wasEdited()"
                type="checkbox"
                class="form-check-input"
                id="shadow_check"
              />
              <label class="form-check-label" for="shadow_check">
                Show shadow box?
              </label>
            </div>
          </div>
          <div class="col-2">
            <div class="form-group form-check">
              <input
                formControlName="display_header"
                (ngModelChange)="wasEdited()"
                type="checkbox"
                class="form-check-input"
                id="activeCheck"
              />
              <label class="form-check-label" for="activeCheck">
                Display Header?
              </label>
            </div>
          </div>

          <div
            *ngIf="actual_style_settings.value.display_header"
            class="col-12 header-div"
            [ngStyle]="{
              backgroundImage:
                'linear-gradient(' +
                actual_style_settings.value.degrees +
                'deg, ' +
                actual_style_settings.value.main_color +
                ' ' +
                actual_style_settings.value.main_percent +
                '%, ' +
                actual_style_settings.value.second_color +
                ' ' +
                actual_style_settings.value.second_percent +
                '%)',
              color: actual_style_settings.value.text_color
            }"
          >
            <h1
              class="text-center"
              [ngStyle]="{ color: actual_style_settings.value.text_color }"
              style="
                font-family: 'Poppins', Helvetica, Arial, Lucida, sans-serif;
                font-size: 40px;
              "
            >
              <!-- <span *ngIf="!actual_style_settings.value.idGroupType">{{ lang.keys["groups"] }} </span>
            <span *ngIf="actual_style_settings.value.idGroupType"> {{ page_title }} </span> -->
              {{ actual_style_settings.value.name }}
            </h1>
          </div>

          <div
            class="col-12 row"
            *ngIf="actual_style_settings.value.display_header && can_edit"
          >
            <h5 class="col-12 text-muted">Header Settings</h5>
            <div class="ws-100"></div>
            <div class="col-2 col-md-1">
              <div
                class="form-group align-items-center"
                style="display: flex; flex-direction: column"
              >
                <label>
                  <span class="tooltip_">
                    <span class="tooltiptext"> Text Color </span>
                    <small> Text </small>
                    <i class="text-secondary fa fa-info-circle"></i>
                  </span>
                </label>
                <input
                  type="color"
                  formControlName="text_color"
                  (ngModelChange)="wasEdited()"
                  class="form-control"
                  style="width: 50px; height: 40px"
                />
                <!-- [(ngModel)]="communityStyleSettings.button_color" -->
              </div>
            </div>
            <div class="col-10 col-md-3 align-self-center">
              <div
                class="form-group"
                style="display: flex; flex-direction: column"
              >
                <label for="degrees_radius" color="gray">
                  Degrees
                  {{ actual_style_settings.value.degrees }}°
                </label>
                <input
                  type="range"
                  class="custom-range"
                  min="0"
                  max="360"
                  step="1"
                  id="degrees_radius"
                  formControlName="degrees"
                  (ngModelChange)="wasEdited()"
                />
              </div>
            </div>
            <div class="col-2 col-md-1">
              <div
                class="form-group align-items-center"
                style="display: flex; flex-direction: column"
              >
                <label>
                  <span class="tooltip_">
                    <span class="tooltiptext">
                      Main Color: The left-side color in the header (this will
                      be the color of the spinner, too).
                    </span>
                    <small> Main </small>
                    <i class="text-secondary fa fa-info-circle"></i>
                  </span>
                </label>
                <input
                  type="color"
                  formControlName="main_color"
                  (ngModelChange)="wasEdited()"
                  class="form-control"
                  style="width: 50px; height: 40px"
                />
                <!-- [(ngModel)]="communityStyleSettings.button_color" -->
              </div>
            </div>
            <div class="col-10 col-md-3 align-self-center">
              <div
                class="form-group"
                style="display: flex; flex-direction: column"
              >
                <label for="main_color_percent_radius_range" color="gray">
                  Main Color Gradient
                  {{ actual_style_settings.value.main_percent }}%
                </label>
                <input
                  type="range"
                  class="custom-range"
                  min="0"
                  max="100"
                  step="1"
                  id="main_color_percent_radius_range"
                  formControlName="main_percent"
                  (ngModelChange)="wasEdited()"
                />
              </div>
            </div>
            <div class="col-2 col-md-1">
              <div
                class="form-group align-items-center"
                style="display: flex; flex-direction: column"
              >
                <label>
                  <span class="tooltip_">
                    <span class="tooltiptext">
                      Second Color: The right-side color in the header.
                    </span>
                    <small> Second </small>
                    <i class="text-secondary fa fa-info-circle"></i>
                  </span>
                </label>
                <input
                  type="color"
                  formControlName="second_color"
                  (ngModelChange)="wasEdited()"
                  class="form-control"
                  style="width: 50px; height: 40px"
                />
                <!-- [(ngModel)]="communityStyleSettings.button_color" -->
              </div>
            </div>
            <div class="col-10 col-md-3 align-self-center">
              <div
                class="form-group"
                style="display: flex; flex-direction: column"
              >
                <label for="second_color_percent_radius_range" color="gray">
                  Second Color Gradient
                  {{ actual_style_settings.value.second_percent }}%
                </label>
                <input
                  type="range"
                  class="custom-range"
                  min="0"
                  max="100"
                  step="1"
                  id="second_color_percent_radius_range"
                  formControlName="second_percent"
                  (ngModelChange)="wasEdited()"
                />
              </div>
            </div>
          </div>
        </div>
        <div class="col-12 text-center mt-2">
          <button
            type="button"
            class="btn btn-success btn-sm"
            (click)="saveIglesia(); category_style_modal.close()"
          >
            <i class="fa fa-save"></i> Save
          </button>
        </div>
      </div>
    </form>
  </ng-template>
</ngx-smart-modal>

<ngx-smart-modal
  #generate_button_modal
  identifier="generate_button_modal"
  [dismissable]="false"
  customClass="large-modal"
  (onAnyCloseEvent)="clearFrameButtonInput()"
>
  <app-profile-text-button
    *ngIf="service_editing"
    [idOrganization]="iglesiaId || currentUser?.idIglesia"
    [text_container]="service_editing"
    [style]="iglesia?.header_menu_settings"
    (on_add)="insertButtonV2()"
  >
  </app-profile-text-button>
  <!-- <div class="row justify-content-center">
    <div class="col-12 col-md-10">
      <div class="row mx-0">
        <div class="col-8">
          <div class="form-group">
            <label class="text-secondary"> Link </label>
            <input
              type="url"
              class="form-control"
              [(ngModel)]="button_gen.link"
            />
          </div>
        </div>
        <div class="col-4 align-self-center">
          <input
            hidden
            #input_button
            type="file"
            name="photo"
            class="form-control"
            accept="image/*"
            (change)="selectAndUploadFile($event.target.files[0])"
          />
          <button
            class="btn btn-sm btn-secondary"
            (click)="input_button.click()"
          >
            Add image
          </button>
        </div>
      </div>
    </div>
    <div class="col-12 mb-3">
      <div class="row justify-content-center">
        <div class="col-12 col-md-4 text-center">
          <span class="text-secondary">Test your button:</span>
          <div class="text-center">
            <a
              [href]="button_gen.link"
              target="_blank"
              rel="noopener noreferrer"
            >
              <button
                class="btn btn-button-test"
                [ngStyle]="{
                  'background-image': getBackgroundUrl(),
                  width: button_gen.width + 'px',
                  height: button_gen.height + 'px',
                  'background-position': 'center',
                  'background-size': 'cover',
                  'background-repeat': 'no-repeat'
                }"
              ></button>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="col-12">
      <small *ngIf="!button_gen.link" class="text-danger">
        Note: Add a link before copy your code. <br />
      </small>
      <small
        *ngIf="
          !button_gen.background ||
          button_gen.background == '/assets/img/btn_src.png'
        "
        class="text-danger"
      >
        Note: Add a background before copy your code.
      </small>
    </div>
    <div class="col-12">
      <pre
        style="
          background-color: whitesmoke;
          padding: 8px;
          white-space: pre-wrap;
        "
        >{{ button_frame }}
        </pre
      >
    </div>

    <div class="col-12 text-center">
      <button
        class="btn btn-sm btn-success"
        (click)="insertButton()"
        [disabled]="
          !button_gen.link ||
          !button_gen.background ||
          button_gen.background == '/assets/img/btn_src.png'
        "
      >
        Insert button
      </button>
    </div>
  </div> -->
</ngx-smart-modal>

<script>
  $(".carousel").carousel({
    interval: 2000,
  });
</script>
