<div class="container mt-2">
  <div class="row">
    <div class="col-8">
      <h4>Album's Form</h4>
    </div>
    <div class="col-4 text-right">
      <button
        class="btn btn-outline-citric btn-sm"
        routerLink="/galleries/home"
        [queryParams]="{ tab: 'albums' }"
      >
        Cancel
      </button>
    </div>
  </div>
  <form [formGroup]="form_group">
    <div class="row">
      <div class="col-xs-12 col-md-4">
        <div class="form-group">
          <label for="nameInput">Album's title</label>
          <input
            id="nameInput"
            type="text"
            class="form-control"
            placeholder="Title"
            formControlName="name"
          />
        </div>
        <div class="form-group">
          <label for="descriptionInput">Description</label>
          <textarea
            type="text"
            class="form-control"
            id="descriptionInput"
            placeholder="Description"
            formControlName="description"
          >
          </textarea>
        </div>
        <div class="form-group" *ngIf="!form_group.get('is_automatic').value">
          <label for="sort_options">Sort</label>
          <select
            type="text"
            class="form-control"
            id="sort_options"
            formControlName="idSortType"
            (change)="sortArray()"
          >
            <option disabled>-- Select one option --</option>
            <option *ngFor="let sort_type of sort_types" [value]="sort_type.id">
              {{ sort_type.name }}
            </option>
          </select>
        </div>
        <div class="form-group form-check mb-0">
          <input
            type="checkbox"
            class="form-check-input"
            id="is_automatic"
            formControlName="is_automatic"
          />
          <label class="form-check-label" for="is_automatic">
            Is automatic?
          </label>
        </div>
        <div class="form-group">
          <button
            class="btn btn-success"
            type="button"
            [disabled]="is_busy"
            (click)="submit()"
          >
            Save
            <span
              *ngIf="is_busy"
              class="spinner-grow spinner-grow-sm mb-1"
            ></span>
          </button>
        </div>
      </div>
      <div class="col-xs-12 col-md-8">
        <h4 class="text-secondary">
          <span *ngIf="!form_group.get('is_automatic').value">
            Select the galleries you want to add to this album.
          </span>
          <span *ngIf="form_group.get('is_automatic').value">
            This album is set up as <i>automatic</i>. This means it shows all
            the galleries you have created.
          </span>
        </h4>
        <div
          class="row"
          cdkDropListGroup
          *ngIf="!form_group.get('is_automatic').value"
        >
          <div
            cdkDropList
            [cdkDropListEnterPredicate]="enter"
            (cdkDropListDropped)="drop()"
            #placeholder
          ></div>
          <!-- <div
            cdkDropList
            *ngFor="let item of array_galleries.controls"
            [cdkDropListEnterPredicate]="enter"
            (cdkDropListDropped)="drop()"
          >
            <div cdkDrag class="example-box">{{ item.get('name').value }}</div>
          </div> -->
          <div
            cdkDropList
            #container_div
            class="col-xs-12 col-sm-6 col-md-3 p-1 mt-2"
            [cdkDropListEnterPredicate]="enter"
            (cdkDropListDropped)="drop()"
            (click)="selectGallery(photo, i)"
            *ngFor="let photo of array_galleries.controls; let i = index"
            style="padding: 0px"
          >
            <div
              cdkDrag
              class="img-container"
              [ngClass]="{ selected: photo.get('is_selected').value }"
              [cdkDragDisabled]="form_group.get('idSortType').value != 5"
            >
              <div
                class="img-display"
                [ngStyle]="calculateHeight(container_div)"
              >
                <div
                  #self_div
                  class="bg-img"
                  [ngStyle]="getNewStyle(photo.get('gallery_cover').value, self_div)"
                ></div>
              </div>
              <small class="text-secondary">
                {{ photo.get("name").value }}
              </small>
            </div>
          </div>
        </div>
      </div>
      <!-- <div class="col-xs-12 col-md-12">
        <button
          class="btn btn-success"
          type="submit"
          *ngIf="galleryForm.id"
          [disabled]="uploading || form.invalid || !pictures_array.length"
        >
          Save gallery
          <span *ngIf="saving" class="spinner-grow spinner-grow-sm mb-1"></span>
        </button>
        <button
          class="btn btn-success"
          type="submit"
          *ngIf="!galleryForm.id"
          [disabled]="uploading || form.invalid"
        >
          Save gallery
          <span *ngIf="saving" class="spinner-grow spinner-grow-sm mb-1"></span>
        </button>
      </div> -->
    </div>
  </form>

  <!-- <div class="text-center">
    <span *ngIf="uploading" class="spinner-grow spinner-grow-lg mb-1"></span>
  </div> -->
</div>
